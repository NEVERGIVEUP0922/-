{"version":3,"sources":["Home/Public/js/select-product.js"],"names":["layui","define","e","n","o","s","layer","i","table","a","form","t","laypage","d","r","p","u","l","is_open","$","extend","Home","length","get","parseJSON","error","data","tips","msg","m","field","width","fixed","templet","title","align","splice","render","elem","list","page","limit","pageSize","cellMinWidth","height","cols","on","console","log","prop","each","this","h","find","count","curr","layout","jump","val","trim","p_sign","start","c","open","type","skin","area","content","success","focus","css_fn","click","yes","parents","index","push","close","initInput","checkBox","emptyErp","decodeURIComponent","concat","JSON","parse","siblings","id"],"mappings":"AAAA,aACAA,MAAMC,OAAO,CAAC,QAAS,QAAS,OAAQ,WAAY,SAAUC,GAC5D,IAAIC,EACAC,EACAC,EAAIL,MAAMM,MACVC,EAAIP,MAAMQ,MACVC,EAAIT,MAAMU,KACVC,EAAIX,MAAMY,QACVC,GAAI,EACJC,EAAI,GACJC,GAAI,EACJC,EAAI,GACJC,EAAI,SAAWf,EAAGS,GACpBP,IAAM,iBAAmBA,EAAIF,EAAEgB,QAAU,EAAIhB,EAAIiB,EAAEC,OAAOlB,EAAGE,IAAKU,EAAEO,OAASnB,EAAIiB,EAAEC,OAAOlB,EAAG,CAAEmB,KAAM,UAAY,EAAIL,EAAEM,OAASX,EAAER,EAAIa,GAAKG,EAAEI,IAAI,6BAA8BrB,EAAG,SAAUA,GAC1L,KAAOA,EAAIiB,EAAEK,UAAUtB,IAAIuB,OAAStB,EAAID,EAAEwB,KAAMf,EAAET,EAAEwB,OAASrB,EAAEsB,KAAKzB,EAAE0B,IAAK,wBAG3EC,EAAI,SAAW3B,GACjB,IAAIS,EAAI,CAAC,CAAEmB,MAAO,WAAYC,MAAO,GAAIC,MAAO,OAAQC,QAAS,WAC7D,OAAOlB,EAAI,oHAAsH,oOAC9H,CAAEe,MAAO,KAAMI,MAAO,KAAMH,MAAO,IAAM,CAAED,MAAO,SAAUI,MAAO,KAAMH,MAAO,KAAO,CAAED,MAAO,UAAWI,MAAO,QAASH,MAAO,KAAO,CAAED,MAAO,UAAWI,MAAO,KAAMH,MAAO,KAAO,CAAED,MAAO,aAAcI,MAAO,KAAMH,MAAO,KAAO,CAAED,MAAO,YAAaI,MAAO,KAAMH,MAAO,IAAKI,MAAO,WAAYtB,GAAKF,EAAEyB,OAAO,EAAG,GAAI7B,EAAE8B,OAAO,CAAEC,KAAM,sBAAuBZ,KAAMxB,EAAEqC,KAAOrC,EAAEqC,KAAOrC,EAAGsC,MAAM,EAAIC,MAAOvC,EAAEwC,UAAY,GAAIC,aAAc,IAAKC,OAAQ,MAAOC,KAAM,CAAClC,KAAOF,EAAEqC,GAAG,oBAAqB,SAAU5C,GAChgB,IAAIS,EAAIQ,EAAE,0BAA0B4B,QAAQC,IAAIjC,EAAGI,EAAEjB,EAAEoC,MAAMW,KAAK,WAAYtC,GAAII,EAAII,EAAEjB,EAAEoC,MAAMW,KAAK,WAAa9B,EAAEjB,EAAEoC,MAAMW,KAAK,WAAW,GAAM9B,EAAEjB,EAAEoC,MAAMW,KAAK,WAAW,IAAOtC,EAAEuC,KAAK,WACxL/B,EAAEgC,MAAMF,KAAK,WAAW,KACtB9B,EAAEjB,EAAEoC,MAAMW,KAAK,WAAW,IAAMxC,EAAE4B,OAAO,WAAY,cAGzDe,EAAI,SAAW3C,GACjBE,EAAE0B,OAAO,CAAEC,KAAMnB,EAAE,wBAAwBkC,KAAK,sBAAsB,GAAIZ,MAAOhC,EAAEiC,UAAY,GAAIY,MAAO7C,EAAE6C,MAAQ7C,EAAE6C,MAAMA,MAAQ,GAAIC,KAAM9C,EAAE+B,MAAQ,EAAGgB,OAAQ,CAAC,OAAQ,OAAQ,QAASC,KAAM,SAAcvD,EAAGS,GAChN,IAAIJ,EAAIY,EAAE,uBAAuBuC,MAAMC,OAAOhD,GAAKM,EAAE,CAAEuB,KAAMtC,EAAEqD,KAAMb,SAAUjC,EAAEiC,SAAUkB,OAAQrD,GAAK,IAAM,SAAUL,GACtH2B,EAAE3B,SAGRA,EAAE,gBAAiB,CAAE2D,MAAO,SAAeC,EAAG5D,GAC5CG,EAAE0D,KAAK,CAAE7B,MAAO,OAAQ8B,KAAM,EAAGC,KAAM/D,EAAE+D,KAAO/D,EAAE+D,KAAO,GAAIC,KAAM,CAAC,QAAS,QAASC,QAAS,ugBAAwgBC,QAAS,WAC5mBjD,EAAE,mCAAmCkD,QAASnE,EAAEoE,QAAUpE,EAAEoE,SAAUnD,EAAE,qBAAqBoD,MAAM,WACjG,IAAIrE,EAAI,GACJS,EAAIQ,EAAE,uBAAuBuC,MAAMC,OAAO3C,EAAI,GAAIL,IAAMT,EAAE0D,OAASjD,GAAIM,EAAEf,EAAG,SAAUA,GACxF2B,EAAE3B,GAAIkD,EAAElD,OAERiB,EAAE,oBAAoB2B,GAAG,QAAS,WACpC3B,EAAE,uBAAuBuC,IAAI,IAAK1C,EAAI,GAAIC,EAAE,GAAI,SAAUf,GACxD2B,EAAE3B,GAAIkD,EAAElD,OAERe,EAAE,GAAI,SAAUf,GAClB2B,EAAE3B,GAAIkD,EAAElD,MAETsE,IAAK,SAAatE,EAAGS,GACtB,IAAIJ,EAAIY,EAAE,uDAAuD,GAAIZ,EAAEe,OAAQ,CAC7E,GAAIP,EAAG,CACL,IAAIN,EAAI,GAAGF,EAAE2C,KAAK,SAAUhD,EAAGS,GAC7B,IAAIJ,EAAIY,EAAER,GAAG8D,QAAQ,MAAMC,QAAQjE,EAAEkE,KAAKxE,EAAEoC,KAAOpC,EAAEoC,KAAKhC,GAAKJ,EAAEI,UAE9D,CACL,IAAIU,EAAIV,EAAEkE,QAAQ,MAAMC,QAAQjE,EAAIN,EAAEoC,KAAOpC,EAAEoC,KAAKtB,GAAKd,EAAEc,GAC5D6C,EAAErD,GAAIJ,EAAEuE,MAAM1E,QACVG,EAAEsB,KAAK,aAAc,yBAE/BkD,UAAW,SAAmB3E,EAAGK,EAAGE,EAAGE,EAAGM,GAC3C,IAAI6C,EAAIX,KAAKxC,IAAMP,EAAIO,GAAIT,EAAIA,GAAK,qBAAsBO,EAAIA,GAAK,SAAUQ,IAAMF,IAAME,EAAE6D,UAAY7D,EAAE6D,SAAUjE,EAAII,EAAE8D,WAAY,EAAIjE,EAAIG,GAAIE,EAAEjB,GAAGqE,MAAM,WAC1J,IAAI5D,EAAIQ,EAAEgC,MACNjD,EAAIS,EAAEe,KAAK,QAAUsD,mBAAmBrE,EAAEe,KAAK,SAAW,GAAGxB,IAAMc,EAAI,GAAGiE,OAAOC,KAAKC,MAAMjF,KAAM4D,EAAED,MAAM,SAAU3D,GACtHS,EAAE+C,IAAIxD,EAAEO,IAAKE,EAAEyE,SAAS,UAAYzE,EAAEyE,SAAS,SAAS1B,IAAIxD,EAAEmF,IAAK1E,EAAEe,KAAK,KAAMxB,EAAEmF,IAAK9E,GAAKA,EAAEL,EAAGS,IAChGM,GAAK","file":"../../../../../temporaryJs/Home/Public/js/select-product.js","sourcesContent":["\"use strict\";\nlayui.define([\"layer\", \"table\", \"form\", \"laypage\"], function (e) {\n  var n,\n      o,\n      s = layui.layer,\n      i = layui.table,\n      a = layui.form,\n      t = layui.laypage,\n      d = !1,\n      r = {},\n      p = !1,\n      u = [],\n      l = function l(e, t) {\n    o && (\"string\" == typeof o ? e.is_open = 1 : e = $.extend(e, o)), r.Home && (e = $.extend(e, { Home: \"home\" })), 0 < u.length ? t(n = u) : $.get(\"/Admin/Product/productList\", e, function (e) {\n      0 === (e = $.parseJSON(e)).error ? (n = e.data, t(e.data)) : s.tips(e.msg, \".modal-search-btn\");\n    });\n  },\n      m = function m(e) {\n    var t = [{ field: \"checkbox\", width: 60, fixed: \"left\", templet: function templet() {\n        return p ? '<div ><input class=\"select-modal-checkbox\" lay-filter=\"p_check\" type=\"checkbox\" name=\"\" lay-skin=\"primary\"></div>' : '<div class=\"layui-form-item\">\\n    <div class=\"layui-input-block\" style=\"margin-left:0\">\\n      <input class=\"select-modal-checkbox\" lay-filter=\"p_check\" type=\"radio\" name=\"p_check\" lay-skin=\"primary\">\\n    </div>\\n  </div>';\n      } }, { field: \"id\", title: \"id\", width: 80 }, { field: \"p_sign\", title: \"型号\", width: 160 }, { field: \"fitemno\", title: \"ERP型号\", width: 160 }, { field: \"package\", title: \"封装\", width: 100 }, { field: \"brand_name\", title: \"品牌\", width: 100 }, { field: \"cate_name\", title: \"分类\", width: 136, align: \"center\" }];d && t.splice(3, 1), i.render({ elem: \".select-modal-table\", data: e.list ? e.list : e, page: !1, limit: e.pageSize || 10, cellMinWidth: 160, height: \"320\", cols: [t] }), a.on(\"checkbox(p_check)\", function (e) {\n      var t = $(\".select-modal-checkbox\");console.log(p, $(e.elem).prop(\"checked\"), t), p ? $(e.elem).prop(\"checked\") ? $(e.elem).prop(\"checked\", !0) : $(e.elem).prop(\"checked\", !1) : (t.each(function () {\n        $(this).prop(\"checked\", !1);\n      }), $(e.elem).prop(\"checked\", !0)), a.render(\"checkbox\", \"p_check\");\n    });\n  },\n      h = function h(a) {\n    t.render({ elem: $(\".layui-layer-content\").find(\".select-modal-page\")[0], limit: a.pageSize || 10, count: a.count ? a.count.count : 10, curr: a.page || 1, layout: [\"prev\", \"page\", \"next\"], jump: function jump(e, t) {\n        var i = $(\".modal-search-input\").val().trim();t || l({ page: e.curr, pageSize: a.pageSize, p_sign: i || \"\" }, function (e) {\n          m(e);\n        });\n      } });\n  };e(\"selectProduct\", { start: function start(c, e) {\n      s.open({ title: \"选择商品\", type: 0, skin: e.skin ? e.skin : \"\", area: [\"640px\", \"60vh\"], content: '<div class=\"select-modal-container layui-form\"> <div class=\"select-modal-box\"> <div class=\"select-search-container\"><input class=\"layui-input modal-search-input\" type=\"text\" placeholder=\"输入商品型号检索\"><div class=\"layui-btn-group\" style=\"margin-top:-4px\"> <button class=\"layui-btn modal-search-btn\">搜索</button> <button class=\"layui-btn layui-btn-primary modal-clear-btn\">清空</button> </div></div><table lay-filter=\"select-modal-table\" class=\"select-modal-table\"></table> <div class=\"select-modal-page\"></div> </div> </div>', success: function success() {\n          $(\".layui-input.modal-search-input\").focus(), e.css_fn && e.css_fn(), $(\".modal-search-btn\").click(function () {\n            var e = {},\n                t = $(\".modal-search-input\").val().trim();u = [], t && (e.p_sign = t), l(e, function (e) {\n              m(e), h(e);\n            });\n          }), $(\".modal-clear-btn\").on(\"click\", function () {\n            $(\".modal-search-input\").val(\"\"), u = [], l({}, function (e) {\n              m(e), h(e);\n            });\n          }), l({}, function (e) {\n            m(e), h(e);\n          });\n        }, yes: function yes(e, t) {\n          var i = $(\".layui-layer-content .select-modal-checkbox:checked\");if (i.length) {\n            if (p) {\n              var a = [];i.each(function (e, t) {\n                var i = $(t).parents(\"tr\").index();a.push(n.list ? n.list[i] : n[i]);\n              });\n            } else {\n              var l = i.parents(\"tr\").index();a = n.list ? n.list[l] : n[l];\n            }c(a), s.close(e);\n          } else s.tips(\"请勾选需要操作的数据\", \".layui-layer-btn0\");\n        } });\n    }, initInput: function initInput(e, i, a, t, l) {\n      var c = this;t && (o = t), e = e || \".jl-select-product\", a = a || \"p_sign\", l && (p = !!l.checkBox && l.checkBox, d = l.emptyErp || !1, r = l), $(e).click(function () {\n        var t = $(this),\n            e = t.data(\"data\") ? decodeURIComponent(t.data(\"data\")) : \"\";e && (u = [].concat(JSON.parse(e))), c.start(function (e) {\n          t.val(e[a]), t.siblings(\"input\") && t.siblings(\"input\").val(e.id), t.data(\"id\", e.id), i && i(e, t);\n        }, l || {});\n      });\n    } });\n});"]}