{"version":3,"sources":["Home/Public/js/select-function.js"],"names":["layui","define","e","n","c","i","t","a","o","layer","form","$","isArray","each","state","text","opened","name","function_name","children","s","get","parseJSON","error","data","open","title","type","area","content","success","jstree","core","check_callback","multiple","on","action","selected","length","node","original","function_id","instance","open_node","get_node","parent","id","close_node","yes","close","tips","start","initInput","this","click","val"],"mappings":"AAAA,aACAA,MAAMC,OAAO,CAAC,QAAS,QAAS,SAAUC,GACxC,IAAIC,EACAC,EACAC,EACAC,EACAC,EACAC,EAAIR,MAAMS,MAAMT,MAAMU,KAAKJ,EAAI,GAAIC,EAAI,SAAWL,IACpD,SAAUI,EAAEJ,EAAGE,GACbA,EAAIA,GAAK,EAAGF,GAAKS,EAAEC,QAAQV,IAAMS,EAAEE,KAAKX,EAAG,SAAUA,EAAGC,GACtDA,EAAEW,MAAQ,GAAIX,EAAEY,KAAO,IAAMX,GAAKD,EAAEW,MAAME,QAAS,EAAIb,EAAEc,MAAQ,IAAMb,EAAID,EAAEc,KAAOd,EAAEe,cAAef,EAAEgB,UAAYb,EAAEH,EAAEgB,SAAUf,EAAI,MAFzI,CAIGD,EAAID,GAAIE,GAAI,EAAIC,GAAKe,KACvBT,EAAEU,IAAI,yBAA0Bf,EAAG,SAAUJ,GAC9C,KAAOA,EAAIS,EAAEW,UAAUpB,IAAIqB,OAAShB,EAAEL,EAAEsB,QACvC,IAAIJ,EAAI,SAAWd,GACpB,IAAIC,EAAEH,EAAII,EAAEiB,KAAK,CAAEC,MAAO,OAAQC,KAAM,EAAGC,KAAM,CAAC,QAAS,SAAUC,QAAS,+EAAgFC,QAAS,WACnKnB,EAAE,yBAAyBoB,OAAO,CAAEC,KAAM,CAAER,KAAMrB,EAAG8B,gBAAgB,EAAIC,UAAU,KAAQC,GAAG,iBAAkB,SAAUjC,EAAGI,GAC3H,GAAI,gBAAkBA,EAAE8B,QAAU9B,EAAE+B,SAASC,OAAQ,CACnD,IAAIlC,EAAIE,EAAEiC,KACNpC,EAAIC,EAAEoC,SAASjC,IAAMJ,EAAEsC,aAAerC,EAAGE,EAAEoC,SAASC,UAAUrC,EAAE+B,SAAS,IAAI,IAAIhC,EAAIC,EAAEoC,SAASE,SAASxC,EAAEyC,QAAQlC,EAAEE,KAAKR,EAAEc,SAAU,SAAUjB,EAAGC,GACrJA,IAAMC,EAAE0C,IAAMxC,EAAEoC,SAASK,WAAW5C,SAIzC6C,IAAK,SAAa9C,EAAGC,GACtBI,GAAKD,GAAKA,EAAEC,GAAIC,EAAEyC,MAAM/C,IAAMM,EAAE0C,KAAK,eAAgB,wBAChD7C,GAAI,GACbH,EAAE,iBAAkB,CAAEiD,MAAO/B,EAAGgC,UAAW,SAAmBlD,EAAGI,EAAGF,GAClE,IAAIC,EAAIgD,KAAKnD,EAAIA,GAAK,sBAAuBE,EAAIA,GAAK,OAAQO,EAAET,GAAGoD,MAAM,WACvE,IAAInD,EAAIQ,EAAE0C,MAAMhD,EAAE8C,MAAM,SAAUjD,GAChCC,EAAEoD,IAAIrD,EAAEE,IAAKE,GAAKA,EAAEJ,EAAGC","file":"../../../../../temporaryJs/Home/Public/js/select-function.js","sourcesContent":["\"use strict\";\nlayui.define([\"layer\", \"form\"], function (e) {\n  var n,\n      c,\n      i,\n      t,\n      a,\n      o = layui.layer;layui.form;t = {}, a = function a(e) {\n    (function t(e, c) {\n      c = c || 1, e && $.isArray(e) && $.each(e, function (e, n) {\n        n.state = {}, n.text = 1 === c ? (n.state.opened = !0, n.name) : 2 === c ? n.name : n.function_name, n.children && t(n.children, c + 1);\n      });\n    })(n = e), c = !0, i && s();\n  }, $.get(\"/Admin/Sys/sysFunction\", t, function (e) {\n    0 === (e = $.parseJSON(e)).error && a(e.data);\n  });var s = function s(t) {\n    var a;c ? o.open({ title: \"选择功能\", type: 0, area: [\"370px\", \"500px\"], content: '<div class=\"select-function-tree\" style=\"height: 100%;overflow: auto\"></div>', success: function success() {\n        $(\".select-function-tree\").jstree({ core: { data: n, check_callback: !0, multiple: !1 } }).on(\"changed.jstree\", function (e, t) {\n          if (\"select_node\" === t.action && t.selected.length) {\n            var c = t.node,\n                n = c.original;a = !!n.function_id && c, t.instance.open_node(t.selected[0]);var i = t.instance.get_node(c.parent);$.each(i.children, function (e, n) {\n              n !== c.id && t.instance.close_node(n);\n            });\n          }\n        });\n      }, yes: function yes(e, n) {\n        a ? (t && t(a), o.close(e)) : o.tips(\"必须选择并且是第三层功能\", \".layui-layer-btn0\");\n      } }) : i = !0;\n  };e(\"selectFunction\", { start: s, initInput: function initInput(e, t, c) {\n      var i = this;e = e || \".jl-select-function\", c = c || \"text\", $(e).click(function () {\n        var n = $(this);i.start(function (e) {\n          n.val(e[c]), t && t(e, n);\n        });\n      });\n    } });\n});"]}