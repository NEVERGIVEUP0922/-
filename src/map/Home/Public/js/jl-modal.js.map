{"version":3,"sources":["Home/Public/js/jl-modal.js"],"names":["define","$","Function","prototype","bind","oThis","this","TypeError","aArgs","Array","slice","call","arguments","fToBind","fNOP","fBound","apply","concat","default_option","title","brief","type","clickClose","cancelBtn","isCenter","maxHeight","confirmText","cancelText","top","left","width","duration","hiddenCloseIcon","confirm","cancel","close","append","timeout","$container","$box","find","$title","$brief","$confirmBtn","$cancelBtn","$closeBtn","active_option","toggleModal","toggle","animate","normal","show","hide","fade","fadeIn","fadeOut","slide","slideDown","slideUp","openModal","option","text","html","css","bottom","right","max-height","overflow","addClass","removeClass","parseFloat","setTimeout","closeModal","clearTimeout","on","_option","extend","new_option","alert","open"],"mappings":"AAAA,aAEAA,OAAO,CAAC,UAAW,SAAUC,GACpBC,SAASC,UAAUC,OACpBF,SAASC,UAAUC,KAAO,SAAUC,GAChC,GAAoB,mBAATC,KACP,MAAM,IAAIC,UAAU,wEAExB,IAAIC,EAAQC,MAAMN,UAAUO,MAAMC,KAAKC,UAAW,GAC9CC,EAAUP,KACVQ,EAAO,aACPC,EAAS,WACT,OAAOF,EAAQG,MAAMV,gBAAgBQ,GAAQT,EAAQC,KAAOD,EAAOG,EAAMS,OAAOR,MAAMN,UAAUO,MAAMC,KAAKC,cAI/G,OAFAE,EAAKX,UAAYG,KAAKH,UACtBY,EAAOZ,UAAY,IAAIW,EAChBC,IAGf,IAAIG,EAAiB,CACjBC,MAAO,QACPC,MAAO,GACPC,KAAM,SACNC,YAAY,EACZC,WAAW,EACXC,UAAU,EACVC,UAAW,GACXC,YAAa,KACbC,WAAY,KACZC,IAAK,EACLC,KAAM,EACNC,MAAO,QACPC,UAAU,EACVC,iBAAiB,EACjBC,QAAS,aACTC,OAAQ,aACRC,MAAO,cAGXlC,EAAE,QAAQmC,OADO,kjBAEjB,IA0DIC,EA1DAC,EAAarC,EAAE,0CACfsC,EAAOD,EAAWE,KAAK,iBACvBC,EAASH,EAAWE,KAAK,mBACzBE,EAASJ,EAAWE,KAAK,mBACzBG,EAAcL,EAAWE,KAAK,yBAC9BI,EAAaN,EAAWE,KAAK,2BAC7BK,EAAYP,EAAWE,KAAK,uBAC5BM,EAAgB,GAkChBC,EAAc,SAAqBC,EAAQ3B,GAC3C,IAAI4B,EAAU,CACVC,OAAQ,CACJC,KAAMb,EAAWa,KACjBC,KAAMd,EAAWc,MAErBC,KAAM,CACFF,KAAMb,EAAWgB,OACjBF,KAAMd,EAAWiB,SAErBC,MAAO,CACHL,KAAMb,EAAWmB,UACjBL,KAAMd,EAAWoB,UAGzB,OAAOV,EAASC,EAAQ5B,GAAY,KAAEjB,KAAKkC,GAAcW,EAAQ5B,GAAY,KAAEjB,KAAKkC,IAGpFqB,EAAY,SAAmBC,GAnDvB,IAAeA,EAAAA,EAoDvBd,EAAgBc,EAlDhBnB,EAAOoB,KAAKD,EAAOzC,OACnBuB,EAAOoB,KAAKF,EAAOxC,OACnBuB,EAAYkB,KAAKD,EAAOlC,aACxBkB,EAAWiB,KAAKD,EAAOjC,YAEvBY,EAAKwB,IAAI,CACLC,OAAQJ,EAAOhC,IACfqC,MAAOL,EAAO/B,KACdC,MAAO8B,EAAO9B,MACdoC,aAAcN,EAAOnC,UACrB0C,SAAY,SAGZrB,EAAcvB,UACdqB,EAAWO,OAEXP,EAAWQ,OAGXN,EAActB,SACdc,EAAW8B,SAAS,wBAEpB9B,EAAW+B,YAAY,wBAGvBvB,EAAcd,gBACda,EAAUO,OAEVP,EAAUM,OAwBdJ,GAAY,EAAMa,EAAOvC,KAAzB0B,GACA,IAAIhB,EAAWuC,WAAWxB,EAAcf,UACpCA,IACAM,EAAUkC,WAAW,WACjBC,EAAW1B,IACZf,KAGPyC,EAAa,SAAoBZ,GACjCb,GAAY,EAAOa,EAAOvC,KAA1B0B,GACA0B,aAAapC,IAwBjB,OAtBApC,EAAE,uBAAuByE,GAAG,QAAS,WACjCF,EAAW1B,GACPA,EAAcX,OACdW,EAAcX,UAGtBQ,EAAY+B,GAAG,QAAS,WAChB5B,EAAcxB,YACdkD,EAAW1B,GAEXA,EAAcb,SACda,EAAcb,YAGtBW,EAAW8B,GAAG,QAAS,WACf5B,EAAcxB,YACdkD,EAAW1B,GAEXA,EAAcZ,QACdY,EAAcZ,WAGf,CACH0B,OAAQ,SAAgBe,GACpB1E,EAAE2E,OAAO1D,EAAgByD,IAE7B1C,QAAS,SAAiB2B,GACtB,IACIiB,EAAa,GACjBA,EAAa5E,EAAE2E,OAAOC,EAAY3D,EAAgB0C,EAF7B,CAAErC,WAAW,IAGlCoC,EAAUkB,IAEdC,MAAO,SAAelB,GAClB,IACIiB,EAAa,GACjB5E,EAAE2E,OAAOC,EAAY3D,EAAgB0C,EAFlB,CAAErC,WAAW,EAAOC,UAAU,IAGjDmC,EAAUkB,IAEdE,KAAMpB,EACNxB,MAAO,SAAeyB,GAClB,IAAIiB,EAAa,GACjB5E,EAAE2E,OAAOC,EAAY3D,EAAgB0C,GACrCY,EAAWK","file":"../../../../../temporaryJs/Home/Public/js/jl-modal.js","sourcesContent":["\"use strict\";\n\ndefine(['jquery'], function ($) {\n    if (!Function.prototype.bind) {\n        Function.prototype.bind = function (oThis) {\n            if (typeof this !== \"function\") {\n                throw new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\");\n            }\n            var aArgs = Array.prototype.slice.call(arguments, 1),\n                fToBind = this,\n                fNOP = function fNOP() {},\n                fBound = function fBound() {\n                return fToBind.apply(this instanceof fNOP && oThis ? this : oThis, aArgs.concat(Array.prototype.slice.call(arguments)));\n            };\n            fNOP.prototype = this.prototype;\n            fBound.prototype = new fNOP();\n            return fBound;\n        };\n    }\n    var default_option = {\n        title: '您确定吗？',\n        brief: '',\n        type: 'normal',\n        clickClose: true,\n        cancelBtn: false,\n        isCenter: false,\n        maxHeight: \"\",\n        confirmText: '确定',\n        cancelText: '关闭',\n        top: 0,\n        left: 0,\n        width: '365px',\n        duration: false,\n        hiddenCloseIcon: false,\n        confirm: function confirm() {},\n        cancel: function cancel() {},\n        close: function close() {}\n    };\n    var modal_html = '<div style=\"display: none\" class=\"jl-modal-container js-modal-container vertical-box\"> ' + '<div class=\"jl-modal-mask\"></div> ' + '<div class=\"jl-modal-box vertical-middle\"> ' + '<div class=\"jl-modal-header vertical-box\"> ' + '<div class=\"jl-modal-close-btn vertical-middle\">' + '<i class=\"jl-modal-close-icon\"></i>' + '</div>' + '</div> ' + '<div class=\"jl-modal-body\"> ' + '<div class=\"jl-modal-title\"></div> ' + '<div class=\"jl-modal-brief\"></div> ' + '</div> ' + '<div class=\"jl-modal-footer\"> ' + '<button class=\"jl-modal-primary-btn\">确定</button> ' + '<button class=\"jl-modal-secondary-btn\">关闭</button> ' + '</div> ' + '</div> ' + '</div>';\n    $('body').append(modal_html);\n    var $container = $('.jl-modal-container.js-modal-container');\n    var $box = $container.find('.jl-modal-box');\n    var $title = $container.find('.jl-modal-title');\n    var $brief = $container.find('.jl-modal-brief');\n    var $confirmBtn = $container.find('.jl-modal-primary-btn');\n    var $cancelBtn = $container.find('.jl-modal-secondary-btn');\n    var $closeBtn = $container.find('.jl-modal-close-btn');\n    var active_option = {};\n    var setUI = function setUI(option) {\n        //文本设置\n        $title.text(option.title);\n        $brief.html(option.brief);\n        $confirmBtn.text(option.confirmText);\n        $cancelBtn.text(option.cancelText);\n        //高度\n        $box.css({\n            bottom: option.top,\n            right: option.left,\n            width: option.width,\n            'max-height': option.maxHeight,\n            'overflow': 'auto'\n        });\n        //取消按钮\n        if (active_option.cancelBtn) {\n            $cancelBtn.show();\n        } else {\n            $cancelBtn.hide();\n        }\n        //居中\n        if (active_option.isCenter) {\n            $container.addClass('jl-modal-text-center');\n        } else {\n            $container.removeClass('jl-modal-text-center');\n        }\n        //隐藏close-icon\n        if (active_option.hiddenCloseIcon) {\n            $closeBtn.hide();\n        } else {\n            $closeBtn.show();\n        }\n    };\n    var toggleModal = function toggleModal(toggle, type) {\n        var animate = {\n            normal: {\n                show: $container.show,\n                hide: $container.hide\n            },\n            fade: {\n                show: $container.fadeIn,\n                hide: $container.fadeOut\n            },\n            slide: {\n                show: $container.slideDown,\n                hide: $container.slideUp\n            }\n        };\n        return toggle ? animate[type]['show'].bind($container) : animate[type]['hide'].bind($container);\n    };\n    var timeout;\n    var openModal = function openModal(option) {\n        active_option = option;\n        setUI(active_option);\n        toggleModal(true, option.type)();\n        var duration = parseFloat(active_option.duration);\n        if (duration) {\n            timeout = setTimeout(function () {\n                closeModal(active_option);\n            }, duration);\n        }\n    };\n    var closeModal = function closeModal(option) {\n        toggleModal(false, option.type)();\n        clearTimeout(timeout);\n    };\n    $('.jl-modal-close-btn').on('click', function () {\n        closeModal(active_option);\n        if (active_option.close) {\n            active_option.close();\n        }\n    });\n    $confirmBtn.on('click', function () {\n        if (active_option.clickClose) {\n            closeModal(active_option);\n        }\n        if (active_option.confirm) {\n            active_option.confirm();\n        }\n    });\n    $cancelBtn.on('click', function () {\n        if (active_option.clickClose) {\n            closeModal(active_option);\n        }\n        if (active_option.cancel) {\n            active_option.cancel();\n        }\n    });\n    return {\n        option: function option(_option) {\n            $.extend(default_option, _option);\n        },\n        confirm: function confirm(option) {\n            var confirm_option = { cancelBtn: true };\n            var new_option = {};\n            new_option = $.extend(new_option, default_option, option, confirm_option);\n            openModal(new_option);\n        },\n        alert: function alert(option) {\n            var alert_option = { cancelBtn: false, isCenter: true };\n            var new_option = {};\n            $.extend(new_option, default_option, option, alert_option);\n            openModal(new_option);\n        },\n        open: openModal,\n        close: function close(option) {\n            var new_option = {};\n            $.extend(new_option, default_option, option);\n            closeModal(new_option);\n        }\n    };\n});"]}