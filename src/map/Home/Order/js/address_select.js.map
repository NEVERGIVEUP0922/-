{"version":3,"sources":["Home/Order/js/address_select.js"],"names":["define","$","district","address","init","$container","code","address_data","getData","$first","find","$second","$third","$input","first_option","each","DISTRICT","index","value","name","children","html","on","$this","this","parent","hasClass","removeClass","addClass","data","siblings","text","cell","show","buildSecondHtml","val","change","hide","active","second_option","index1","index2","buildThirdHtml","third_option","index3","province","getProvince","city","getCity"],"mappings":"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","file":"../../../../../temporaryJs/Home/Order/js/address_select.js","sourcesContent":["'use strict';\n\ndefine(['jquery', 'Toolkit/district', 'Toolkit/handle-district'], function ($, district, address) {\n    return {\n        init: function init($container, code) {\n            //初始化地址导入\n            var address_data = address.getData(code);\n            //html初始化\n            var $first = $container.find('.js-select-first');\n            var $second = $container.find('.js-select-second');\n            var $third = $container.find('.js-select-third');\n            var $input = $container.find('.js-selector-input');\n            var first_option = '';\n            $.each(DISTRICT, function (index, value) {\n                if (value.name === address_data[0]) {\n                    first_option += '<li class=\"lj-active-li\" data-index=\"' + index + '\">' + value.name + '</li>';\n                } else {\n                    first_option += '<li data-index=\"' + index + '\">' + value.name + '</li>';\n                }\n            });\n            $first.children('.lj-option-box').html(first_option);\n            $container.find('.jl-y-select-title').on('click', function () {\n                var $this = $(this);\n                if ($this.parent().hasClass('jl-y-select-active')) {\n                    $this.parent().removeClass('jl-y-select-active');\n                } else {\n                    $container.find('.jl-y-select').removeClass('jl-y-select-active');\n                    $this.parent().addClass('jl-y-select-active');\n                }\n            });\n            //第一层\n            $first.find('.lj-option-box').on('click', 'li', function () {\n                var $this = $(this);\n                var index = $this.data('index');\n                $this.addClass('lj-active-li').siblings().removeClass('lj-active-li');\n                $first.removeClass('jl-y-select-active').children('.jl-y-select-title').children('.jl-c-c').text($this.text());\n                //第二层初始化\n                if (DISTRICT[index].cell) {\n                    $second.show();\n                    $third.show();\n                    buildSecondHtml(DISTRICT[index].cell);\n                    $second.children('.jl-y-select-title').children('.jl-c-c').text('请选择');\n                    $third.children('.jl-y-select-title').children('.jl-c-c').text('请选择');\n                    if ($input.val() !== '') {\n                        $input.val('');\n                        $input.change();\n                    }\n                } else {\n                    $input.val(DISTRICT[index].code);\n                    $input.change();\n                    $second.hide();\n                    $third.hide();\n                }\n            });\n            var buildSecondHtml = function buildSecondHtml(data, active) {\n                var second_option = '';\n                $.each(data, function (index, value) {\n                    if (active && active === value.name) {\n                        second_option += '<li class=\"lj-active-li\" data-index=\"' + index + '\">' + value.name + '</li>';\n                    } else {\n                        second_option += '<li data-index=\"' + index + '\">' + value.name + '</li>';\n                    }\n                });\n                $second.children('.lj-option-box').html(second_option);\n            };\n            //第二层\n            $second.find('.lj-option-box').on('click', 'li', function () {\n                var $this = $(this);\n                var index1 = $first.find('.lj-active-li').data('index');\n                var index2 = $this.data('index');\n                $this.addClass('lj-active-li').siblings().removeClass('lj-active-li');\n                $second.removeClass('jl-y-select-active').children('.jl-y-select-title').children('.jl-c-c').text($this.text());\n                //初始化第三层\n                if (DISTRICT[index1].cell[index2].cell) {\n                    $third.show();\n                    buildThirdHtml(DISTRICT[index1].cell[index2].cell);\n                    $third.children('.jl-y-select-title').children('.jl-c-c').text('请选择');\n                    if ($input.val() !== '') {\n                        $input.val('');\n                        $input.change();\n                    }\n                } else {\n                    $third.hide();\n                    $input.val(DISTRICT[index1].cell[index2].code);\n                    $input.change();\n                }\n            });\n            var buildThirdHtml = function buildThirdHtml(data, active) {\n                var third_option = '';\n                $.each(data, function (index, value) {\n                    if (active && active === value.name) {\n                        third_option += '<li class=\"lj-active-li\" data-index=\"' + index + '\">' + value.name + '</li>';\n                    } else {\n                        third_option += '<li data-index=\"' + index + '\">' + value.name + '</li>';\n                    }\n                });\n                $third.children('.lj-option-box').html(third_option);\n            };\n            //第三层\n            $third.find('.lj-option-box').on('click', 'li', function () {\n                var $this = $(this);\n                var index1 = $first.find('.lj-active-li').data('index');\n                var index2 = $second.find('.lj-active-li').data('index');\n                var index3 = $this.data('index');\n                $this.addClass('lj-active-li').siblings().removeClass('lj-active-li');\n                $input.val(DISTRICT[index1].cell[index2].cell[index3].code);\n                $input.change();\n                $third.removeClass('jl-y-select-active').children('.jl-y-select-title').children('.jl-c-c').text($this.text());\n            });\n            //触发初始化数据\n            if (code) {\n                $input.val(code);\n                $first.find('.jl-y-select-title').children('span').text(address_data[0]);\n                if (address_data[1]) {\n                    $second.find('.jl-y-select-title').children('span').text(address_data[1]);\n                    var province = address.getProvince(code);\n                    buildSecondHtml(province.cell, address_data[1]);\n                } else {\n                    $second.hide();\n                }\n                if (address_data[2]) {\n                    $third.find('.jl-y-select-title').children('span').text(address_data[2]);\n                    var city = address.getCity(code);\n                    buildThirdHtml(city.cell, address_data[2]);\n                } else {\n                    $third.hide();\n                }\n            }\n        }\n    };\n});"]}