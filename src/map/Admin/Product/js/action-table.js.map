{"version":3,"sources":["Admin/Product/js/action-table.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","layui","define","exports","productList","request","categoryTree","brandList","attributeList","tableIns","cols","table","actionTpl","layer","upload","form","jlTool","selectErpProduct","selectPm","selectProduct","useAttributeList","demo","p_sign","fitemno","product_fitemno","pack_unit","brand_id","delivery","fcustitemno","fitemno_access","package","min","fstcb","price_section","start","end","price_ratio","min_price","is_tax","tax","_tax_disabled","discount_num","min_open","cate_id","parameter","describe_image","note","is_inquiry_table","pdf","person_liable","extraAttr","describe","show_site","unit","earnest_scale","search_top","is_search_top","volume_length","volume_width","voltage_output_start","voltage_output_end","voltage_input_start","voltage_input_end","current_start","current_end","checkedInd","allchecked","isChoose","addRow","value","elems","keys","data","getData","val","parent","siblings","find","text","id","cloneDemo","JSON","parse","stringify","push","handleData","reload","done","initSpecial","exestPsign","array","$","each","index","$tr","this","parents","eq","single","_this","field","trim","tplType","prop","parseInt","encodeURIComponent","parseJSON","replace","parseFloat","LAY_CHECKED","off","on","inputs_one","inputs_two","selects","dataOption","decodeURIComponent","select_id","attr_id","_cate_id","ind","cate_arr","split","inArray","_useAttributeList","length","name","key","current","current_type","voltage_input_type","voltage_output_type","volume","volume_start","volume_end","custom","custom_start","custom_type","custom_end","custom1","custom1_start","custom1_type","custom1_end","custom2","custom2_start","custom2_type","custom2_end","data_handle","extend","thisData","forEach","input_area","selectAttr","input_input","str","open","title","area","content","success","render","elem","attrs","filter","copy_data","Number","str_one","str_two","str_select","html","yes","formData","serializeArray","sendObj","isAll","test","css","closeAll","btn2","initInput","$this","children","action","onceData","click","option","attr","section","type","remove","$input","append","layero","join","close","that","erps","passArray","prev","item","strs","erpArrays","btn","erpArray","indexOf","concat","erp_data","splice","ue","ischoose","giveImg","givePdf","goCate","fn","selected","reduce","isArray","i","v","cate_name","category","jstree","core","state","opened","e","instance","get_node","rerutnDate","tips","goDescribe","getHtml","returnObj","z-index","setTimeout","text-align","height","UE","getEditor","autoHeightEnabled","scaleEnabled","allowDivTransToP","initialFrameWidth","initialFrameHeight","topOffset","contents","width","margin","addClass","destroy","getContent","full","datas","all","checked","LAY_TABLE_INDEX","actions","checkedProduct","duration","selectCate","removeClass","img","url","path","res","error","msg","data_image","layerOpen","elemen","imgArr","imgSrc","bgCss","background-color","accept","exts","sendIframeMsg","buildSection","sectionHtml","isAdding","$list","max","origin","target","ratio","isPass","hasClass","init","products","list","adminFront","uid","fixed","templet","inputReadOnly","input","align","d","select_erp_Tap","selectBrand","input_delivery","selectTap","select","priceInfo","input_earnest","checkbox","inputNum","selectCategory","AttrList","attr_list","isAllEmpty","volume_name","volume_type","current_name","voltage_input_name","voltage_output_name","toolbar","unshift","page","cellMinWidth","limit","event","confirm","ids","tr"],"mappings":"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","file":"../../../../../temporaryJs/Admin/Product/js/action-table.js","sourcesContent":["'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nlayui.define(['table', 'actionTpl', 'layer', 'upload', 'form', 'jlTool', 'selectErpProduct', 'selectPm', 'selectProduct'], function (exports) {\n    var table = layui.table;\n    var actionTpl = layui.actionTpl;\n    var layer = layui.layer;\n    var upload = layui.upload;\n    var form = layui.form;\n    var jlTool = layui.jlTool;\n    var selectErpProduct = layui.selectErpProduct;\n    var selectPm = layui.selectPm;\n    var selectProduct = layui.selectProduct;\n    var productList,\n        request,\n        categoryTree,\n        brandList,\n        attributeList,\n        useAttributeList = [];\n    var tableIns, cols;\n    var demo = {\n        'p_sign': '', 'fitemno': '', 'product_fitemno': '', 'pack_unit': '', 'brand_id': '', 'delivery': '', 'fcustitemno': '',\n        'fitemno_access': '', 'package': '', 'min': '0', 'fstcb': '',\n        'price_section': [{\n            start: \"0\",\n            end: \"100\",\n            price_ratio: \"2.00\"\n        }, {\n            start: \"100\",\n            end: \"3000\",\n            price_ratio: \"1.50\"\n        }, {\n            start: \"3000\",\n            end: \"0\",\n            price_ratio: \"1.20\"\n        }],\n        'min_price': '0', 'is_tax': '0', 'tax': '', '_tax_disabled': 1, 'discount_num': '0', 'min_open': '', 'cate_id': '',\n        'parameter': '', 'describe_image': '', 'note': '', 'is_inquiry_table': '', 'pdf': '', 'person_liable': '', 'extraAttr': '',\n        'describe': '', 'show_site': '', 'unit': 'PCS', 'earnest_scale': '0', 'search_top': '', 'is_search_top': '0',\n        'volume_length': '', 'volume_width': '', 'voltage_output_start': '', 'voltage_output_end': '',\n        'voltage_input_start': '', 'voltage_input_end': '',\n        'current_start': '', 'current_end': ''\n    };\n\n    var initTable = function initTable() {\n        var data = request.action === 'edit' ? productList : [demo];\n        //console.log(\"data\",data,request,attributeList,categoryTree);\n        cols = [{ field: 'p_sign', title: '型号', fixed: 'left', tplType: 'input', templet: request.action === 'edit' ? actionTpl.inputReadOnly('p_sign') : actionTpl.input('p_sign') }, { field: 'fitemno', title: 'ERP型号', tplType: 'input', templet: actionTpl.selectErpProduct('fitemno') }, { field: 'product_fitemno', width: 120, align: 'center', title: '多关联', tplType: 'selectProductTap', templet: function templet(d) {\n                return actionTpl.select_erp_Tap('product_fitemno', d);\n            } }, { field: 'package', title: '封装', tplType: 'input', templet: function templet(d) {\n                return '<div><input type=\"text\" value=\"' + d[\"package\"] + '\" name=\"package_title\"  class=\"layui-input jl-control-package  layui-form-label-pinyin-package\" ></div>';\n            } }, { field: 'brand_id', title: '品牌', width: 160, tplType: 'select', templet: actionTpl.selectBrand('brand_id', brandList) }, { field: 'delivery', title: '交期', width: 105, tplType: 'input', templet: actionTpl.input_delivery('delivery') }, { field: 'fitemno_access', width: 100, title: '替代料号', tplType: 'selectTap', templet: function templet(d) {\n                return actionTpl.selectTap('fitemno_access', d);\n            } }, { field: 'pack_unit', title: '包装形态', width: 105, tplType: 'select', templet: actionTpl.select('pack_unit', [{ title: '', value: '' }, { title: '盘', value: '盘' }, { title: '管', value: '管' }, { title: '袋', value: '袋' }, { title: '托盘', value: '托盘' }]) }, { field: 'unit', title: '单位', width: 105, tplType: 'input', templet: actionTpl.input('unit') }, { field: 'min', title: '最小包装数', width: 105, tplType: 'input', templet: actionTpl.input('min') }, { field: 'fstcb', title: '标准成本', width: 105 }, { field: 'price_section', width: 130, title: '区间数量/价格', tplType: 'priceInfo', templet: actionTpl.priceInfo('price_section') }, { field: 'earnest_scale', title: '定金比例', width: 125, tplType: 'scale', templet: actionTpl.input_earnest('earnest_scale') }, { field: 'min_price', title: '建议最低价', width: 105, tplType: 'input', templet: actionTpl.input('min_price') }, { field: 'is_tax', title: '进项', width: 60, align: 'center', tplType: 'checkbox', templet: actionTpl.checkbox('is_tax') }, { field: 'tax', title: '开票税点', width: 100, tplType: 'select', templet: actionTpl.select('tax', [{ title: '10%', value: '1.10' }, { title: '11%', value: '1.11' }, { title: '12%', value: '1.12' }, { title: '13%', value: '1.13' }, { title: '14%', value: '1.14' }, { title: '15%', value: '1.15' }, { title: '16%', value: '1.16' }, { title: '17%', value: '1.17' }]) }, //下拉\n        { field: 'discount_num', title: '折扣限', tplType: 'input', templet: actionTpl.inputNum('discount_num') }, { field: 'min_open', title: '是否拆', width: 105, tplType: 'select', templet: actionTpl.select('min_open', [{ title: '拆', value: '1' }, { title: '不拆', value: '0' }]) }, //下拉\n        { field: 'cate_id', title: '分类', width: 130, tplType: 'selectCategory', templet: actionTpl.selectCategory('cate_id', categoryTree.category) }, { field: 'parameter', title: '简要描述', tplType: 'input', templet: actionTpl.input('parameter') }, { field: 'describe', title: '产品描述', width: 90, align: 'center', tplType: 'describe', templet: actionTpl.describe('describe') }, { field: 'show_site', title: '展示状态', width: 105, tplType: 'select', templet: actionTpl.select('show_site', [{ title: '无', value: '' }, { title: '最新', value: '1' }, { title: '推荐', value: '2' }, { title: '特卖', value: '3' }]) }, //下拉，默认空\n        { field: 'note_isshow', title: '是否显示备注', tplType: 'checkbox', width: 120, align: \"center\", templet: actionTpl.checkbox('note_isshow') }, { field: 'search_top', title: '主推型号', tplType: 'input', templet: actionTpl.input('search_top') }, { field: 'is_search_top', title: '是否头条', tplType: 'checkbox', width: 100, align: \"center\", templet: actionTpl.checkbox('is_search_top') }, { field: 'note', title: '备注', tplType: 'input', templet: actionTpl.input('note') }, { field: 'is_inquiry_table', title: '报备表', width: 80, align: \"center\", tplType: 'checkbox', templet: actionTpl.checkbox('is_inquiry_table') }, { field: 'describe_image', title: '产品图片', tplType: 'img', width: 130, templet: function templet(d) {\n                return actionTpl.img('describe_image', d);\n            } }, { field: 'pdf', title: '产品规格书', tplType: 'pdf', width: 200, templet: function templet(d) {\n                return actionTpl.pdf('pdf', d);\n            } }, { field: 'extraAttr', width: 120, title: '其他属性', tplType: 'extraAttr', templet: function templet(d) {\n                var obj;\n                var data = [{ name: \"电流\", key: \"current\", current: \"\", current_start: \"\", current_type: \"2\", current_end: \"\" }, { name: \"输入电压\", key: \"voltage_input\", voltage_input_start: \"\", voltage_input_type: \"2\", voltage_input_end: \"\" }, { name: \"输出电压\", key: \"voltage_output\", voltage_output_start: \"\", voltage_output_type: \"2\", voltage_output_end: \"\" }, { name: \"体积\", key: \"volume\", volume: \"\", volume_start: \"\", current_type: \"1\", volume_end: \"\" }, { name: \"属性5\", key: \"custom\", custom: \"\", custom_start: \"\", custom_type: \"1\", custom_end: \"\" }, { name: \"属性6\", key: \"custom1\", custom1: \"\", custom1_start: \"\", custom1_type: \"1\", custom1_end: \"\" }, { name: \"属性7\", key: \"custom2\", custom2: \"\", custom2_start: \"\", custom2_type: \"1\", custom2_end: \"\" }];\n\n                if (request.action === 'edit') {\n                    var AttrList = d.attr_list;\n                    var isAllEmpty = false,\n                        isAll = 0;\n                    obj = { attr_id: d.attr_id || \"1\", volume_name: '体积', volume_type: '1', volume: '', current_name: '电流', current_type: '2', current_start: '', current_end: '', voltage_input_name: '输入电压', voltage_input_type: '2', voltage_input_start: '', voltage_input_end: '0', voltage_output_name: '输出电压', voltage_output_type: '2', voltage_output_start: '', voltage_output_end: '' };\n                    data.forEach(function (val, ind) {\n                        if (AttrList.id) {\n                            if (AttrList[val.key]) {\n                                obj[val.key + \"_name\"] = AttrList[val.key];\n                                obj[val.key + \"_type\"] = AttrList[val.key + \"_type\"];\n                                obj[val.key + \"_value\"] = d[val.key + \"_value\"] || \"\";\n                                obj[val.key + \"_start\"] = d[val.key + \"_start\"] || \"\";\n                                obj[val.key + \"_end\"] = d[val.key + \"_end\"] || \"\";\n                                obj[val.key + \"_type\"] == 1 && (obj[val.key] = d[val.key] || \"\");\n                                if (val.key == \"volume\") {\n                                    obj[val.key + \"_length\"] = d[val.key + \"_length\"] || \"\";\n                                    obj[val.key + \"_width\"] = d[val.key + \"_width\"] || \"\";\n                                    //判断属性是否全为空\n                                    if (obj[val.key + \"_type\"] > 1) {\n                                        if (!d[val.key + \"_length\"] && !d[val.key + \"_width\"]) {\n                                            isAll++;\n                                        }\n                                    } else {\n                                        if (!d[val.key + \"_length\"]) {\n                                            isAll++;\n                                        }\n                                    }\n                                } else {\n                                    if (obj[val.key + \"_type\"] > 1) {\n                                        if (!d[val.key + \"_start\"] && !d[val.key + \"_end\"]) {\n                                            isAll++;\n                                        }\n                                    } else {\n                                        if (!d[val.key + \"_start\"]) {\n                                            isAll++;\n                                        }\n                                    }\n                                };\n                            } else {\n                                isAll++;\n                                obj[val.key + \"_name\"] = '';\n                            };\n                        } else {\n                            obj = \"\";\n                            /*obj[val.key + \"_start\"] =d[val.key + \"_start\"]||\"\";\r\n                            obj[val.key + \"_end\"] = d[val.key + \"_end\"]||\"\";\r\n                            (obj[val.key + \"_type\"] == 1)&&(obj[val.key] = d[val.key]||\"\");\r\n                            if(val.key==\"volume\"){\r\n                                obj[val.key + \"_length\"] =d[val.key + \"_length\"]||\"\";\r\n                                obj[val.key + \"_width\"] = d[val.key + \"_width\"]||\"\";\r\n                            };*/\n                        }\n                    });\n                } else {\n                    obj = \"\";\n                };\n                //console.log('isAll',isAll,data.length,d);\n                isAllEmpty = isAll === data.length;\n                return '<div>' + '<button data-option=\"' + (obj ? encodeURIComponent(JSON.stringify(obj)) : \"\") + '\" class=\"layui-btn layui-btn-sm jl-control-extraAttr\" style=\"background-color:' + (obj ? !isAllEmpty ? \"#009688\" : \"#c2c2c2\" : \"#c2c2c2\") + '\">查看其他属性</button>' + '</div>';\n            }\n        },\n\n        /*{field: 'current_start', title: '电流(A)',tplType:'input_input',width:200,align:\"center\",templet:function(d){  return actionTpl.inputInput(\"current\",d)}},\r\n        {field: 'voltage_input_start', title: '输入电压(V)',tplType:'input_input',width:200,align:\"center\",templet:function(d){ return actionTpl.inputInput(\"voltage_input\",d)}},\r\n        {field: 'voltage_output_start', title: '输出电压(V)',tplType:'input_input',width:200,align:\"center\",templet:function(d){ return actionTpl.inputInput(\"voltage_output\",d)}},\r\n        {field: 'volume_length', title: '体积(m*m*m)',tplType:'input_volume',templet:function(d){ return actionTpl.input_one(\"volume_length\",d)}},*/\n\n        // {field: 'person_liable', title: '产品负责人',tplType:'input',templet:actionTpl.selectPm('person_liable')},\n        { field: 'handle', title: '操作', toolbar: '#handle-tpl', fixed: 'right', width: 170 }];\n\n        if (request.action === 'edit') {\n            cols.unshift({ field: 'id', title: '产品id', fixed: 'left', align: 'center', width: 70, tplType: 'id', templet: actionTpl.id('id') });\n            cols.unshift({ field: 'checkbox', type: 'checkbox', width: 50, fixed: 'left' });\n        } else {\n            cols.unshift({ field: 'checkbox', type: 'checkbox', width: 50, fixed: 'left' });\n        };\n        tableIns = table.render({\n            elem: '#editable-table',\n            height: 'full-196',\n            id: 'product',\n            data: data,\n            page: false,\n            cellMinWidth: 160,\n            cols: [cols],\n            limit: 50,\n            done: function done() {\n                $(\".layui-form tr td\").find(\"div.layui-table-cell\").css('line-height', '40px');\n            }\n        });\n        initSpecial();\n        //删除按钮\n        table.on('tool(editable)', function (obj) {\n            //console.log(obj);\n            if (obj.event === 'del') {\n                //删除\n                layer.confirm('删除只是放弃编辑这一行，不会影响数据', function (index) {\n                    var ids = obj.data.id;\n                    var datas;\n                    if (!ids) {\n                        obj.tr.remove();\n                        datas = getData();\n                    } else {\n                        var ind;\n                        datas = getData();\n                        //console.log(ind,ids,datas);\n                        $.each(datas, function (index, val) {\n                            if (val.id == ids) {\n                                ind = index;\n                                // console.log(ind,ids,datas);\n                                return false;\n                            }\n                        });\n                        if (ind) {\n                            datas.splice(ind, 1);\n                        };\n                    };\n                    tableIns.reload({\n                        data: datas\n                    });\n                    //console.log(datas);\n                    initSpecial();\n                    layer.close(index);\n                });\n            } else {\n                //商品引入\n\n            }\n        });\n        //勾选会给紧跟后面的加上加上禁用状态\n        form.on('checkbox(checkbox)', function (data) {\n            /*if(data.elem.checked){\r\n                $(data.elem).parent().parent().next().find('.disabled-container').removeClass('disabled-active')\r\n            }\r\n            else {\r\n                $(data.elem).parent().parent().next().find('.disabled-container').addClass('disabled-active')\r\n            }*/\n        });\n    };\n    //添加一行\n    var checkedInd = { allchecked: false, isChoose: false };\n    var addRow = function addRow(value, elems, keys) {\n        var data = value ? getData(value[\"p_sign\"]) : getData();\n        /*if(!data){\r\n            layer.open({content:\"该型号已经存在，请更换换用其他型...\",btn:[\"确定\"],yes:function(){ layer.closeAll()}});\r\n            return};*/\n        if (keys == 0 && data) {\n            elems.val(value.fitemno);\n            elems.parent().parent().siblings(\"[data-field=fstcb]\").find(\"div\").text(value.fstcb);\n            elems.data('id', value.id);\n            return;\n        }\n        var cloneDemo = JSON.parse(JSON.stringify(demo));\n        if (value) {\n            cloneDemo['fitemno'] = value.fitemno;cloneDemo['fstcb'] = value.fstcb;\n        };\n        data.push(cloneDemo);\n        // console.log(data);//return;//alert(123);return;\n        data = handleData(data);\n        tableIns.reload({\n            data: data,\n            done: function done() {\n                initSpecial();\n            }\n        });\n        //initSpecial();\n    };\n\n    //获取数据\n    var getData = function getData(exestPsign) {\n        var array = [];\n        $('.layui-show .layui-table-fixed-l>.layui-table-body').find('tr').each(function (index) {\n            var $tr = $(this).parents('.layui-table-fixed-l').siblings('.layui-table-main').find('tr').eq(index);\n            var single = {};\n            var _this = this;\n            $.each(cols, function (index, value) {\n                // console.log(4);\n                if (value.field === 'p_sign') {\n                    if (exestPsign && exestPsign == $(_this).find('.jl-control-p_sign').val()) {\n                        array = null;\n                        return false;\n                    }\n                    single['p_sign'] = $(_this).find('.jl-control-p_sign').val() ? $(_this).find('.jl-control-p_sign').val().trim() : \"\";\n                } else if (value.field == 'fstcb') {\n                    single[value['field']] = $tr.find('.laytable-cell-1-' + value['field']).text();\n                } else if (value.tplType === 'input' || value.tplType === 'select' || value.tplType === 'time') {\n                    single[value['field']] = $tr.find('.jl-control-' + value['field']).val() ? $tr.find('.jl-control-' + value['field']).val().trim() : \"\";\n                } else if (value.tplType === 'checkbox') {\n                    single[value['field']] = $tr.find('.jl-control-' + value['field']).prop('checked') ? 1 : 0;\n                } else if (value.tplType === 'scale') {\n                    single[value['field']] = parseInt($tr.find('.jl-control-' + value['field']).val()) / 100;\n                } else if (value.tplType === 'selectTap') {\n                    single[value['field']] = $tr.find('.jl-control-' + value['field']).data(\"option\") ? $tr.find('.jl-control-' + value['field']).data(\"option\").trim() : \"\";\n                } else if (value.tplType === 'selectProductTap') {\n                    single[value['field']] = $tr.find('.jl-control-' + value['field']).data(\"option\") || [];\n                    // console.log(JSON.parse($tr.find('.jl-control-'+value['field']).prev(\"span\").text()));\n                } else if (value.tplType === 'selectCategory') {\n                    single['cate_id'] = $tr.find('.jl-control-' + value['field']).data('id');\n                    single['cate_name'] = $tr.find('.jl-control-' + value['field']).text();\n                } else if (value.tplType === 'describe') {\n                    single[value['field']] = encodeURIComponent($tr.find('.jl-control-' + value['field']).data('describe'));\n                } else if (value.tplType === 'img') {\n                    single[value['field']] = $tr.find('.jl-control-' + value['field']).data('img') ? $tr.find('.jl-control-' + value['field']).data('img').trim() : \"\";\n                } else if (value.tplType === 'pdf') {\n                    single[value['field']] = $tr.find('.jl-control-' + value['field']).data('pdf') ? $tr.find('.jl-control-' + value['field']).data('pdf').trim() : \"\";\n                } else if (value.tplType === 'priceInfo') {\n                    single[value['field']] = $.parseJSON($tr.find('.jl-control-' + value['field']).siblings().text().trim());\n                } else if (value.tplType === 'id') {\n                    single[value['field']] = $.parseJSON($tr.find('.jl-control-' + value['field']).text().trim());\n                } else if (value.tplType === 'input_input') {\n                    single[value['field']] = $tr.find('.jl-control-' + value['field']).val() ? $tr.find('.jl-control-' + value['field']).val().trim() : \"\";\n                    single[value['field'].replace(\"start\", \"end\")] = $tr.find('.jl-control-' + value['field'].replace(\"start\", \"end\")).val() ? $tr.find('.jl-control-' + value['field'].replace(\"start\", \"end\")).val().trim() : \"\";\n                } else if (value.tplType === 'input_volume') {\n                    single[value['field']] = $tr.find('.jl-control-' + value['field']).val() ? $tr.find('.jl-control-' + value['field']).val().trim() : \"\";\n                    //single[value['field'].replace(\"length\",\"width\")] = $tr.find('.jl-control-'+value['field'].replace(\"length\",\"width\")).val().trim()\n                } else if (value.tplType === 'extraAttr') {\n                    single[value['field']] = $tr.find('.jl-control-' + value['field']).data(\"option\") ? $tr.find('.jl-control-' + value['field']).data(\"option\").trim() : \"\";\n                }\n            });\n            if (array) array.push(single);\n            //console.log(2);\n        }); //ole.log(array);\n        return array;\n    };\n    //预处理数据\n    var handleData = function handleData(data) {\n        if (!data) {\n            return [];\n        }\n        $.each(data, function (index, value) {\n            if (parseInt(value['is_tax']) === 0) {\n                value['_tax_disabled'] = 1;\n            }\n            var earnest_scale = parseFloat(value['earnest_scale']);\n            value['earnest_scale'] = earnest_scale ? earnest_scale * 100 : 0;\n            value.LAY_CHECKED = false;\n        });\n        return data;\n    };\n    //各种初始化和事件\n    var initSpecial = function initSpecial() {\n        //限制电流，电压最大，最小值\n        var minTimer, maxTimer;\n        var min_isOnce = {},\n            max_isOnce = {};\n        var min_max_limit = function min_max_limit() {\n            return;\n            $(\".jl-limit-min\").on(\"blur\", function () {\n                //console.log($(this).attr(\"name\"));\n                min_isOnce[$(this).attr(\"name\")] = true;\n                var $this = $(this);\n                var attr_name = $this.parent(\".layui-inline\").find(\".layui-form-label\").find(\"input[name$=_name]\");\n                //console.log(attr_name.val());\n                clearTimeout(minTimer);\n                min_isOnce[$(this).attr(\"name\")] = false;\n                minTimer = setTimeout(function () {\n                    if ($this.next().val() > 0) {\n                        if (parseFloat($this.val()) > parseFloat($this.next().val())) {\n                            layer.open({\n                                content: \"电压电流的最小值需小于最大值哟\",\n                                type: 0,\n                                btn: [\"确认\"],\n                                yes: function yes() {\n                                    layer.closeAll();\n                                    $this.val($this.next().val());\n                                }\n                            });\n                        }\n                    }\n                    min_isOnce[$(this).attr(\"name\")] = true;\n                }, 10);\n            });\n            $(\".jl-limit-max\").on(\"blur\", function () {\n                max_isOnce[$(this).attr(\"name\")] = true;\n                var $this = $(this);\n                clearTimeout(maxTimer);\n                max_isOnce[$(this).attr(\"name\")] = false;\n                maxTimer = setTimeout(function () {\n                    if ($this.prev().val()) {\n                        if (parseFloat($this.val()) < parseFloat($this.prev().val()) && $this.val() > 0) {\n                            layer.open({\n                                content: \"电压电流的最大值需大于最小值哟\",\n                                type: 0,\n                                btn: [\"确认\"],\n                                yes: function yes() {\n                                    layer.closeAll();\n                                    $this.val($this.prev().val());\n                                }\n                            });\n                        }\n                    }\n                    max_isOnce[$(this).attr(\"name\")] = true;\n                }, 10);\n            });\n        };\n        //其他属性\n        $(\".jl-control-extraAttr\").off(\"click\").on(\"click\", function () {\n            var inputs_one = \"\",\n                inputs_two = \"\",\n                selects = '';\n            var _this = this;\n            var dataOption = $(_this).data(\"option\") ? JSON.parse(decodeURIComponent($(_this).data(\"option\"))) : \"\";\n            var select_id = dataOption ? dataOption.attr_id : \"1\";\n            var _cate_id = $(_this).parents(\"tr\").find(\".jl-control-cate_id\").data(\"id\");\n            if (!dataOption) return;\n            useAttributeList = [];\n            if (attributeList) {\n                $.each(attributeList, function (ind, val) {\n                    var cate_arr = val.cate_id.split(\",\");\n                    if ($.inArray(_cate_id + \"\", cate_arr) > -1) {\n                        useAttributeList.push(val);\n                    };\n                });\n            }\n            //console.log(useAttributeList,_cate_id);\n            var _useAttributeList = useAttributeList.length > 0 ? useAttributeList : attributeList;\n            var data = [{ name: \"电流\", key: \"current\", current: \"\", current_start: \"\", current_type: \"2\", current_end: \"\" }, { name: \"输入电压\", key: \"voltage_input\", voltage_input_start: \"\", voltage_input_type: \"2\", voltage_input_end: \"\" }, { name: \"输出电压\", key: \"voltage_output\", voltage_output_start: \"\", voltage_output_type: \"2\", voltage_output_end: \"\" }, { name: \"体积\", key: \"volume\", volume: \"\", volume_start: \"\", current_type: \"1\", volume_end: \"\" }, { name: \"属性5\", key: \"custom\", custom: \"\", custom_start: \"\", custom_type: \"1\", custom_end: \"\" }, { name: \"属性6\", key: \"custom1\", custom1: \"\", custom1_start: \"\", custom1_type: \"1\", custom1_end: \"\" }, { name: \"属性7\", key: \"custom2\", custom2: \"\", custom2_start: \"\", custom2_type: \"1\", custom2_end: \"\" }];\n            var data_handle = $.extend(true, [], data);\n            //console.log(data_handle,dataOption,_useAttributeList);\n            if (_useAttributeList.length > 0) {\n                var thisData = _useAttributeList[0];\n                data_handle.forEach(function (val, ind) {\n                    val.name = thisData[val.key];\n                    val[val.key + \"_value\"] = thisData[val.key + \"_value\"];\n                    val[val.key + \"_type\"] = thisData[val.key + \"_type\"];\n                });\n            }\n            if (dataOption) {\n                data_handle.forEach(function (val, ind) {\n                    val.name = dataOption[val.key + \"_name\"];\n                    val[val.key + \"_type\"] = dataOption[val.key + \"_type\"];\n                    val[val.key + \"_start\"] = dataOption[val.key + \"_start\"];\n                    val[val.key + \"_end\"] = dataOption[val.key + \"_end\"];\n                    val[val.key + \"_type\"] == 1 && (val[val.key] = dataOption[val.key]);\n                    if (val.key == \"volume\") {\n                        val[val.key + \"_length\"] = dataOption[val.key + \"_length\"] || \"\";\n                        val[val.key + \"_width\"] = dataOption[val.key + \"_width\"] || \"\";\n                    };\n                });\n            }\n            $.each(data_handle, function (ind, val) {\n                if (val.name) {\n                    val[val.key + \"_type\"] > 1 ? inputs_two += actionTpl.input_area(val.key, val) : val[val.key + \"_value\"] ? selects += actionTpl.selectAttr(val) : inputs_one += actionTpl.input_input(val);\n                };\n            });\n            // console.log(_useAttributeList);\n            var str = '<form class=\"layui-form\">' + actionTpl.selectAttr(select_id, _useAttributeList ? _useAttributeList : []) + '<div class=\"input-container\">' + selects + inputs_one + inputs_two + '</div></form>';\n            layer.open({\n                title: \"其他属性\",\n                area: [\"30vw\", \"auto\"],\n                content: str,\n                success: function success() {\n                    min_max_limit();\n                    form.render();\n                    form.on(\"select(attrSelect)\", function (obj) {\n                        var id = $(obj.elem).val();\n                        var attrs = _useAttributeList.filter(function (val, ind) {\n                            if (val.id == id) {\n                                return val;\n                            };\n                        });\n                        var copy_data = $.extend(true, [], data);\n                        if (id != \"0\") {\n                            copy_data.forEach(function (val, ind) {\n                                if (dataOption.attr_id == attrs[0].id) {\n                                    val.name = dataOption[val.key + \"_name\"];\n                                    val[val.key + \"_type\"] = dataOption[val.key + \"_type\"];\n                                    val[val.key + \"_value\"] = _useAttributeList[0][val.key + \"_value\"] || \"\";\n                                    val[val.key + \"_start\"] = dataOption[val.key + \"_start\"];\n                                    val[val.key + \"_end\"] = dataOption[val.key + \"_end\"];\n                                    if (val.key === \"volume\") {\n                                        val[val.key + \"_length\"] = dataOption[val.key + \"_length\"];\n                                        val[val.key + \"_width\"] = dataOption[val.key + \"_width\"];\n                                    };\n                                    Number(val[val.key + \"_type\"]) === 1 && (val[val.key] = dataOption[val.key]);\n                                } else {\n                                    val.name = attrs[0][val.key];\n                                    val[val.key + \"_type\"] = attrs[0][val.key + \"_type\"];\n                                    val[val.key + \"_value\"] = _useAttributeList[0][val.key + \"_value\"] || \"\";\n                                    val[val.key + \"_start\"] = \"\";\n                                    val[val.key + \"_end\"] = \"\";\n                                    val[val.key + \"_type\"] == 1 && (val[val.key] = \"\");\n                                }\n                            });\n                        }\n                        var str_one = \"\",\n                            str_two = \"\",\n                            str_select = \"\";\n                        $.each(copy_data, function (ind, val) {\n                            if (val.name) {\n                                val[val.key + \"_type\"] > 1 ? str_two += actionTpl.input_area(val.key, val) : val[val.key + \"_value\"] ? str_select += actionTpl.selectAttr(val) : str_one += actionTpl.input_input(val);\n                            }\n                        });\n                        $(\".input-container\").html(str_select + str_one + str_two);\n                        form.render();\n                        min_max_limit();\n                    });\n                },\n                yes: function yes() {\n                    var formData = $(\".layui-form\").serializeArray();\n                    var sendObj = {},\n                        isAll = true;\n                    if (formData.length > 0) {\n                        formData.forEach(function (val, ind) {\n                            sendObj[val.name] = val.value;\n                            var reg = /(_start)|(_end)|(_length)|(_width)/ig;\n                            if (reg.test(val.name) && val.value) {\n                                isAll = false;\n                            }\n                        });\n                    };\n                    // console.log('sendObj',formData,isAll);\n                    if (isAll) {\n                        $(_this).css('background-color', '#c2c2c2');\n                    } else {\n                        $(_this).css('background-color', '#009688');\n                    }\n                    $(_this).data(\"option\", encodeURIComponent(JSON.stringify(sendObj)));\n                    layer.closeAll();\n                },\n                btn2: function btn2() {}\n            });\n        });\n        $('.img-pdf').html('<button class=\"layui-btn action-product action-upload-img action-all-img \" data-type=\"all-imgs\">产品图片</button>\\n' + '                <button class=\"layui-btn action-product action-upload-pdf \" data-type=\"all-pdf\">产品规格书</button>');\n        //封装\n        initInput({ \"package\": \".layui-form-label-pinyin-package\" });\n        //erp型号\n        selectErpProduct.initInput('.jl-select-erp-product', function (data, $this) {\n            $this.parent().parent().siblings('td[data-field=\"fstcb\"]').children().text(data.fstcb);\n        }, addRow, request.action);\n        //商品型号\n        selectProduct.initInput('.jl-select-product', function (data, $this) {\n            var onceData = getData();\n            var index = $this.parents(\"tr\").data(\"index\");\n            onceData[index] = data;\n            onceData = handleData(onceData);\n            tableIns.reload({\n                data: onceData,\n                done: function done() {}\n            });\n            initSpecial();\n        });\n        //替代料号\n        $('.select-tap').click(function () {\n            var $this = $(this);\n            var option = $this.data('option') || $this.attr('data-option');\n            if ((typeof option === 'undefined' ? 'undefined' : _typeof(option)) != \"object\") {\n                option = option ? option.split('{}') : [];\n            } else {\n                option = \"\";\n            };\n            //\n            var html = '<div class=\"action-tpl-tap-box\"><div class=\"action-tpl-tap-list\">';\n            var section = function section(value) {\n                return '<div class=\"action-tpl-tap-section\"> ' + '<input type=\"text\" autocomplete=\"off\" class=\"layui-input\" value=\"' + value + '\"> ' + '<button class=\"layui-btn layui-btn-primary action-tpl-tap-delete\"> ' + '<i class=\"iconfont-jl icon-jl-delete_fill\"></i> ' + '</button> ' + '</div> ';\n            };\n            $.each(option, function (index, value) {\n                if (value.trim()) html += section(value);\n            });\n            html += '<div class=\"action-tpl-tap-section\"> ' + '<input type=\"text\" autocomplete=\"off\" class=\"layui-input\" value=\"\"> ' + '<button class=\"layui-btn layui-btn-primary action-tpl-tap-delete\"> ' + '<i class=\"iconfont-jl icon-jl-delete_fill\"></i> ' + '</button> ' + '</div> ';\n            layer.open({\n                title: '替代料号',\n                type: 0,\n                content: html,\n                success: function success() {\n                    $('.action-tpl-tap-list').on('click', '.action-tpl-tap-delete', function () {\n                        $(this).parents('.action-tpl-tap-section').remove();\n                    });\n                    $('.action-tpl-tap-add').click(function () {\n                        var $input = $(this).siblings('input');\n                        var value = $input.val().trim();\n                        if (value) {\n                            $input.val('');\n                            $('.action-tpl-tap-list').append(section(value));\n                        }\n                    });\n                },\n                yes: function yes(index, layero) {\n                    var data = [];\n                    $('.action-tpl-tap-section').each(function () {\n                        var value = $(this).children('.layui-input').val().trim();\n                        if (value) data.push(value);\n                    });\n                    // console.log(\"data\",data);\n                    $this.data('option', data.length > 0 ? data.join('{}') : \"\");\n                    if (!data) {\n                        $this.css(\"background-color\", \"#c2c2c2\");\n                    } else {\n                        $this.css(\"background-color\", \"#009688\");\n                    };\n                    layer.close(index);\n                }\n            });\n        });\n        $(\".select-erp-tap\").click(function () {\n            var that = this;\n            var erps = $(that).data(\"option\") || [];\n            if (erps.length < 1) {\n                var passArray = $.parseJSON($(that).prev().text()) || [];\n                $.each(passArray, function (index, item) {\n                    erps.push(item.fitemno);\n                });\n            };\n            var strs = \"\";\n            $.each(erps, function (index, item) {\n                strs += '<div ><span style=\"display:inline-block;margin:5px 0;border:1px solid #ddd;cursor:pointer;padding:5px 10px;width: 76%\">' + item + '</span> <i class=\"iconfont-jl icon-jl-delete_fill erp-delete\" style=\"cursor:pointer;color:red;display:inline-block;padding:5px\"></i></div>';\n            });\n            var html = \"\" + strs + \"<div class=\\\" erp_add price-section-add\\\" style='padding-top:4px;border:1px solid #e6e6e6'> <i class=\\\"iconfont-jl icon-jl-addition_fill\\\"></i> </div>\";\n            var erpArrays = [];\n            layer.open({\n                title: '添加关联ERP型号',\n                type: 0,\n                area: [\"30%\"],\n                content: html,\n                btn: [\"确定\", \"取消\"],\n                success: function success() {\n                    selectErpProduct.initInput('.erp_add', function (data) {\n                        var erpArray = [];\n                        erpArrays = [];\n                        $.each(data, function (index, item) {\n                            if (erps.indexOf(item.fitemno) == -1) {\n                                erpArray.push(item.fitemno);\n                            }\n                        });\n                        if (erps.length > 0) erpArrays = erps.concat(erpArray);\n                        erpArrays = erpArrays.length > 0 ? erpArrays : erpArray;\n                        $(that).data(\"option\", erpArrays);\n                        $(that).prev(\"span\").text(JSON.stringify(erpArrays));\n                        $(that).css(\"background-color\", \"#009688\");\n                    }, false, false);\n                    $(\".erp-delete\").on(\"click\", function () {\n                        var erp_data = $(that).data(\"option\") || [];\n                        //console.log(\"erp_data\",erp_data,$(this).prev().text());\n                        $(this).parent().remove();\n                        erp_data.splice(erp_data.indexOf($(this).prev().text()), 1);\n                        $(that).data(\"option\", erp_data);\n                        $(that).prev(\"span\").text(JSON.stringify(erp_data));\n                    });\n                },\n                yes: function yes(index, layero) {\n                    if (erpArrays.length == 0 || erps.length < 1) {\n                        $(that).css(\"background-color\", \"#c2c2c2\");\n                    } else {\n                        $(that).css(\"background-color\", \"#009688\");\n                    }\n                    layer.closeAll();\n                }\n            });\n        });\n        //赋值数据\n        $('.layui-show .layui-table-fixed-l>.layui-table-body').find('tr').each(function (index) {\n            var that = this;\n            var $tr = $(this).parents('.layui-table-fixed-l').siblings('.layui-table-main').find('tr').eq(index);\n            var erps = $tr.find('.jl-control-product_fitemno').data(\"option\") || [];\n            if (erps.length < 1) {\n                var passArray = $.parseJSON($tr.find('.jl-control-product_fitemno').prev(\"span\").text()) || [];\n                $.each(passArray, function (index, item) {\n                    erps.push(item.fitemno);\n                });\n            };\n            $tr.find('.jl-control-product_fitemno').data(\"option\", erps);\n            //console.log($tr.find('.jl-control-product_fitemno').data(\"option\"));\n        });\n        //分类，产品描述,图片,规格统一一致\n        var ischoose = false;\n        var isAllimg = false;\n        var giveImg = null;\n        var givePdf = null;\n        table.on('checkbox(editable)', function (obj) {\n            var datas = getData();\n            if (obj.type == \"all\") {\n                if (obj.checked) {\n                    checkedInd.all = \"all\";\n                    checkedInd.allchecked = true;\n                    checkedInd.isChoose = true;\n                    for (var i = 0; i < datas.length; i++) {\n                        checkedInd[i] = true;\n                    };\n                } else {\n                    checkedInd.all = \"null\";\n                    checkedInd.allchecked = false;\n                    checkedInd.isChoose = false;\n                    for (var i = 0; i < datas.length; i++) {\n                        checkedInd[i] = false;\n                    };\n                };\n                //console.log(obj,checkedInd); //当前是否选中状态\n                return;\n            };\n            checkedInd.all = \"one\";\n            if (obj.checked) {\n                checkedInd[obj.data.LAY_TABLE_INDEX] = true;\n            } else {\n                checkedInd[obj.data.LAY_TABLE_INDEX] = false;\n            };\n            $.each(checkedInd, function (ind, val) {\n                if (Number(ind) >= 0) {\n                    if (val) {\n                        checkedInd.isChoose = true;\n                        return false;\n                    } else {\n                        checkedInd.isChoose = false;\n                    };\n                }\n            });\n            // console.log(obj,checkedInd); //当前是否选中状态\n            /* console.log(obj.data); //选中行的相关数据\r\n             console.log(obj.type); //如果触发的是全选，则为：all，如果触发的是单选，则为：one*/\n        });\n        function isEmptyObject(obj) {\n            for (var key in obj) {\n                return false;\n            }\n            return true;\n        }\n        $(\".action-product\").off(\"click\").on(\"click\", function () {\n            ischoose = true;\n            var actions = $(this).data(\"type\");\n            var datas = getData();\n            var backup = $.extend(true, {}, datas);\n            var _this = this;\n            var checkedProduct = checkedInd;\n            if (!checkedProduct.isChoose) {\n                ischoose = false;\n                layer.tips('请勾选商品', this, { duration: 2000 });\n                return;\n            };\n            var allDatahandle = function allDatahandle(datas, selectCate) {\n                $.each(datas, function (ind, val) {\n                    if (checkedProduct.all == \"all\") {\n                        val.cate_id = selectCate.cate_id;\n                        val.cate_name = selectCate.cate_name;\n                        val.LAY_CHECKED = true;\n                    } else if (checkedProduct.all == \"one\") {\n                        /*if(checkedProduct.allchecked){\r\n                            val.cate_id=selectCate.cate_id;\r\n                            val.cate_name=selectCate.cate_name;\r\n                            val.LAY_CHECKED=true;}*/\n                        $.each(checkedProduct, function (index, value) {\n                            if (ind == index && value) {\n                                val.cate_id = selectCate.cate_id;\n                                val.cate_name = selectCate.cate_name;\n                                val.LAY_CHECKED = true;\n                            };\n                        });\n                    };\n                });\n                // console.log(datas,selectCate,checkedProduct);\n                tableIns.reload({\n                    data: datas,\n                    done: function done() {\n                        initSpecial();\n                    }\n                });\n            };\n            switch (actions) {\n                case \"all-cate\":\n                    goCate(this, function (selectCate) {\n                        datas = handleData(datas);\n                        allDatahandle(datas, selectCate);\n                    });\n                    break;\n                case \"all-productDetail\":\n                    goDescribe(this, function (describe) {\n                        datas = handleData(datas);\n                        $.each(datas, function (ind, val) {\n                            if (checkedProduct.all == \"all\") {\n                                val.describe = describe;\n                                val.LAY_CHECKED = true;\n                            } else if (checkedProduct.all == \"one\") {\n                                $.each(checkedProduct, function (index, value) {\n                                    if (ind == index && value) {\n                                        val.describe = describe;\n                                        val.LAY_CHECKED = true;\n                                    };\n                                });\n                            };\n                        });\n                        tableIns.reload({\n                            data: datas\n                        });\n                        initSpecial();\n                    });\n                    break;\n                case \"all-imgs\":\n                    isAllimg = true;\n                    $(\".action-upload-img\").removeClass(\"active-upload\");\n                    datas = handleData(datas);\n                    $(_this).addClass('active-upload');\n                    giveImg = function giveImg(img) {\n                        $.each(datas, function (ind, val) {\n                            if (checkedProduct.all == \"all\") {\n                                if (val.describe_image) {\n                                    val.describe_image += \";\" + img;\n                                } else {\n                                    val.describe_image += img;\n                                }\n                                val.LAY_CHECKED = true;\n                            } else if (checkedProduct.all == \"one\") {\n                                /*if(checkedProduct.allchecked){\r\n                                    if(val.describe_image){\r\n                                        val.describe_image +=\";\"+ img;\r\n                                    }else{\r\n                                        val.describe_image +=img;\r\n                                    }\r\n                                    val.LAY_CHECKED=true;\r\n                                }*/\n                                $.each(checkedProduct, function (index, value) {\n                                    /*if(checkedProduct.allchecked){\r\n                                        if(parseFloat(index)&&ind == index ){\r\n                                            val.describe_image=backup[ind].describe_image;\r\n                                            val.LAY_CHECKED=false;\r\n                                        };\r\n                                      }else{*/\n                                    if (ind == index && value) {\n                                        if (val.describe_image) {\n                                            val.describe_image += \";\" + img;\n                                        } else {\n                                            val.describe_image += img;\n                                        }\n                                        val.LAY_CHECKED = true;\n                                    };\n                                    //};\n                                });\n                            };\n                        });\n                        // console.log(datas,img,checkedProduct);\n                        tableIns.reload({\n                            data: datas,\n                            done: function done() {\n                                initSpecial();\n                            }\n                        });\n                        //initSpecial();\n                    };\n                    break;\n                case \"all-pdf\":\n                    $('.action-upload-pdf').removeClass('active-upload');\n                    datas = handleData(datas);\n                    $(_this).addClass('active-upload');\n                    givePdf = function givePdf(pdf) {\n                        $.each(datas, function (ind, val) {\n                            if (checkedProduct.all == \"all\") {\n                                val.pdf = pdf;\n                                val.LAY_CHECKED = true;\n                            } else if (checkedProduct.all == \"one\") {\n                                $.each(checkedProduct, function (index, value) {\n                                    if (ind == index && value) {\n                                        val.pdf = pdf;\n                                        val.LAY_CHECKED = true;\n                                    };\n                                });\n                            };\n                        });\n                        tableIns.reload({\n                            data: datas,\n                            done: function done() {\n                                initSpecial();\n                            }\n                        });\n                    };\n                    break;\n            };\n        });\n        //选择分类\n        $('.select-category').click(function () {\n            goCate(this, false);\n        });\n\n        function goCate(_this, fn) {\n            var $this = $(_this);\n            var id = $this.data('id');\n            var selected;\n            layer.open({\n                title: '选择分类',\n                type: 0,\n                content: '<div class=\"jstree-div\"></div>',\n                success: function success() {\n                    var reduceTree = function reduce(value) {\n                        if (value && $.isArray(value)) {\n                            $.each(value, function (i, v) {\n                                v['text'] = v.cate_name;\n                                if (v.children) {\n                                    reduce(v.children);\n                                }\n                            });\n                        }\n                    }(categoryTree.category);\n                    $('.jstree-div').jstree({\n                        'core': {\n                            'data': [{\n                                \"text\": \"商品分类\",\n                                \"state\": { \"opened\": true },\n                                \"children\": categoryTree.category\n                            }]\n                        }\n                    }).on(\"changed.jstree\", function (e, data) {\n                        if (data.action === 'select_node' && data.selected.length) {\n                            var category = data.instance.get_node(data.selected[0]);\n                            selected = category.children.length === 0 ? category : false;\n                        }\n                    });\n                },\n                yes: function yes(index, layero) {\n                    if (selected) {\n                        useAttributeList = [];\n                        $this.data('id', selected.id);\n                        $this.parents(\"tr\").find(\".jl-control-extraAttr\").data('option', \"\");\n                        if (!fn) $this.data('text', selected.text).text(selected.text);\n                        if (fn) {\n                            var rerutnDate = {\n                                cate_id: selected.id,\n                                cate_name: selected.text\n                            };\n                            fn(rerutnDate);\n                        };\n                        layer.close(index);\n                    } else {\n                        layer.tips('必须选择并且是最底层分类', '.layui-layer-btn0');\n                    }\n                }\n            });\n        }\n\n        //产品描述\n        var ue;\n        $('.describe-tpl').click(function () {\n            goDescribe(this, false);\n        });\n        function getHtml(describe) {\n            var reg = /(<p>)+|[\\u2E80-\\u9FFF]+/g;\n            var returndata;\n            var returnObj = describe;\n            if (!describe) {\n                return describe;\n            };\n            if (!reg.test(describe + \"\")) {\n                returndata = decodeURIComponent(describe + '');\n                return getHtml(returndata);\n            } else {\n                return returnObj;\n            };\n        }\n        function goDescribe(_this, fn) {\n            var $this = $(_this);\n            var describe = getHtml(($this.data('describe') + '').indexOf('null') > -1 ? '' : $this.data('describe'));\n            var index = layer.open({\n                title: '产品描述',\n                //area: ['500px', '300px'],\n                type: 0,\n                content: '<script id=\"describe-container\" name=\"content\" type=\"text/plain\">' + describe + '</script>',\n                success: function success() {\n                    $(\".layui-layer-shade\").css({ \"z-index\": \"1000\" });\n                    $(\".layui-layer.layui-layer-dialog\").css({ \"z-index\": \"1000\" });\n                    setTimeout(function () {\n                        $(\".layui-layer-btn\").css({ \"text-align\": \"center\" });\n                        var $content = $('.layui-layer-content');\n                        var height = $content.height();\n                        ue = UE.getEditor('describe-container', {\n                            autoHeightEnabled: true,\n                            scaleEnabled: false,\n                            allowDivTransToP: false,\n                            initialFrameWidth: 1162,\n                            initialFrameHeight: height - 120,\n                            topOffset: 43\n                        });\n                        setTimeout(function () {\n                            $($(\"#ueditor_0\").contents()[0]).find(\"body\").css({ 'width': '1160', 'margin': '0 auto' }).addClass(\"containers\");\n                            $(\"#describe-container>div\").css(\"margin\", \"0 auto\");\n                        }, 100);\n                    }, 200);\n                },\n                end: function end() {\n                    ue.destroy();\n                },\n                yes: function yes(index, layero) {\n                    var html = ue.getContent();\n                    $this.data('describe', encodeURIComponent(html));\n                    if (fn) fn(encodeURIComponent(html));\n                    layer.close(index);\n                }\n            });\n            layer.full(index);\n        }\n\n        //上传图片\n        $('.action-upload-img-self').off(\"click\").on(\"click\", function () {\n            ischoose = true;\n            $('.action-upload-img').removeClass('active-upload');\n            isAllimg = false;\n            $(this).addClass('active-upload');\n        });\n        var uploadInst = upload.render({\n            elem: '.action-upload-img',\n            url: '/admin/excel/fileUpload'\n            /*,auto: false,\r\n            bindAction:'.action-upload-img'*/\n            , data: {\n                path: 'product'\n            },\n            done: function done(res) {\n                if (res.error === 0) {\n                    if (!ischoose) {\n                        layer.msg(\"请选择商品\");\n                        return;\n                    };\n                    var data_image = $('.action-upload-img.active-upload').siblings('.jl-control-describe_image').data('img');\n                    if (data_image) {\n                        data_image += \";\" + res.data.path;\n                    } else {\n                        data_image = res.data.path;\n                    }\n                    $('.action-upload-img.active-upload').siblings('.jl-control-describe_image').data('img', data_image).css(\"background-color\", \"#009688\");\n                    if (giveImg) {\n                        giveImg(data_image);\n                    };\n                    layerOpen(data_image);\n                } else {\n                    layer.msg(res.msg);\n                }\n            }\n        });\n        function layerOpen(data_image, elemen) {\n            var imgArr = data_image.split(\";\");\n            var strs = \"\";\n            $.each(imgArr, function (index, item) {\n                strs += '<div style=\"width: 150px;height: 150px;float:left;margin:4px;position:relative\"><span style=\"position:absolute;top: -4px;right: -4px;width: 20px; height: 20px;line-height: 20px;background-color: black;color: #fff;border-radius: 50%;cursor: pointer;\">X</span><img style=\"width: 150px;height: auto;vertical-align: middle;cursor: pointer\" src=\"' + item + '\"/></div>';\n            });\n            layer.open({\n                title: '产品描述',\n                type: 0,\n                content: '<div class=\"action-product-imgs\" style=\"text-align: center;overflow:hidden\">' + strs + '</div>',\n                success: function success() {\n                    $(\".action-product-imgs\").find(\"span\").on(\"click\", function () {\n                        $(this).parent().remove();\n                    });\n                },\n                yes: function yes() {\n                    var imgSrc = \"\";\n                    $(\".action-product-imgs\").find(\"img\").each(function (index) {\n                        if (index == 0) {\n                            imgSrc += $(this).attr(\"src\");\n                        } else {\n                            imgSrc += \";\" + $(this).attr(\"src\");\n                        }\n                    });\n                    var bgCss = { \"background-color\": \"#009688\" };\n                    if (!imgSrc) {\n                        bgCss[\"background-color\"] = \"#c2c2c2\";\n                    };\n                    if (elemen) {\n                        $(elemen).data('img', imgSrc);\n                    } else {\n                        $('.action-upload-img.active-upload').siblings('.jl-control-describe_image').data('img', imgSrc);\n                    };\n                    if (elemen) $(elemen).css(bgCss);\n                    setTimeout(function () {\n                        $('.action-upload-img').removeClass(\"active-upload\");\n                    }, 200);\n                    layer.closeAll();\n                }\n            });\n        }\n        //查看图片\n        $('.jl-control-describe_image').click(function () {\n            var img = $(this).data('img');\n            if (img) {\n                layerOpen(img, this);\n            } else {\n                layer.msg('没有图片');\n            }\n        });\n        //上传pdf\n        $('.action-upload-pdf-self').click(function () {\n            ischoose = true;\n            $('.action-upload-pdf').removeClass('active-upload');\n            $(this).addClass('active-upload');\n        });\n        var uploadInst2 = upload.render({\n            elem: '.action-upload-pdf',\n            url: '/admin/excel/fileUpload',\n            accept: 'file',\n            exts: 'pdf',\n            data: {\n                path: 'productPdf'\n            },\n            done: function done(res) {\n                if (res.error === 0) {\n                    if (!ischoose) {\n                        layer.msg(\"请选择商品\");\n                        return;\n                    };\n                    $('.action-upload-pdf.active-upload').siblings('.jl-control-pdf').data('pdf', res.data.path).css(\"background-color\", \"#009688\");\n                    if (givePdf) {\n                        givePdf(res.data.path);\n                    };\n                    layer.msg('上传成功');\n                    jlTool.sendIframeMsg('new', {\n                        url: res.data.path\n                    });\n                } else {\n                    layer.msg(res.msg);\n                }\n            }\n        });\n        //查看pdf\n        $('.jl-control-pdf').click(function () {\n            var pdf = $(this).data('pdf');\n            if (pdf) {\n                jlTool.sendIframeMsg('new', {\n                    url: pdf\n                });\n            } else {\n                layer.msg('没有规格书');\n            }\n        });\n        //价格区间\n        var buildSection = function buildSection(value) {\n            value.start = parseInt(value.start);\n            value.end = parseInt(value.end);\n            return '<tr> ' + '<td class=\"price-asction-start\">' + '<input class=\"layui-input price-section-start-input\" type=\"number\" value=\"' + value.start + '\"/>' + '</td> ' + '<td class=\"price-asction-end\">' + (value.end === 0 ? '以上' : value.end - 1) + '</td> ' + '<td><input class=\"layui-input price-asction-ratio\" type=\"number\" value=\"' + value.price_ratio + '\"/></td> ' + '<td> ' + '<div class=\"price-section-delete\"> ' + '<i class=\"iconfont-jl icon-jl-delete_fill\"></i> ' + '</div> ' + '</td> ' + '</tr> ';\n        };\n        $('.price-tpl').click(function () {\n            var $this = $(this);\n            var section = $.parseJSON($this.siblings().text());\n            var sectionHtml = '';\n            if (section && $.isArray(section)) {\n                $.each(section, function (index, value) {\n                    sectionHtml += buildSection(value);\n                });\n            } else {\n                sectionHtml += buildSection({\n                    start: 0,\n                    end: 0\n                });\n            }\n            layer.open({\n                title: '区间数量及区间比例设置',\n                type: 0,\n                area: '440px',\n                content: '<div class=\"price-section-container\"> ' + '<table class=\"layui-table price-section-table\" lay-size=\"sm\"> ' + '<colgroup><col width=\"100\"><col width=\"100\"><col width=\"100\"><col width=\"120\"></colgroup> ' + '<thead><tr><th>开始数量</th>' + '<th class=\"end-tips-mark\">结束数量</th>' + '<th class=\"ratio-tips-mark\">区间比例</th>' + '<th>操作</th></tr></thead> ' + '<tbody class=\"price-section-list\"> ' + sectionHtml + '</tbody> ' + '</table> ' + '<div class=\"price-section-add\"> ' + '<i class=\"iconfont-jl icon-jl-addition_fill\"></i> ' + '</div> ' + '</div>',\n                success: function success() {\n                    var isAdding = false;\n                    //添加\n                    $('.price-section-add').click(function () {\n                        if (!isAdding) {\n                            isAdding = true;\n                            $('.price-section-list').append('<tr class=\"price-section-new\"> ' + '<td><input class=\"layui-input price-add-input\" type=\"number\" value=\"\"/></td> ' + '<td>以上</td> ' + '<td><input class=\"layui-input price-ratio-input\" type=\"number\" value=\"\"/></td> ' + '<td> ' + '<div> ' + '<div class=\"layui-btn-group\"> ' + '<button class=\"layui-btn layui-btn-sm price-add-confirm\">确定</button> ' + '<button class=\"layui-btn layui-btn-sm price-add-cancel\">取消</button> ' + '</div> ' + '</div> ' + '</td> ' + '</tr> ');\n                        }\n                    });\n                    var $list = $('.price-section-list');\n                    //删除\n                    $list.on('click', '.price-section-delete', function () {\n                        var $tr = $(this).parent().parent();\n                        $tr.prev().find('.price-asction-end').text('以上');\n                        $tr.remove();\n                    });\n                    //区间修改\n                    $list.on('change', '.price-section-start-input', function () {\n                        var $tr = $(this).parent().parent();\n                        var min = parseInt($tr.prev().find('.price-section-start-input').val());\n                        var max = parseInt($tr.find('.price-asction-end').text());\n                        var value = parseInt($(this).val());\n                        if ((!min || value > min) && (!max || value < max)) {\n                            $tr.prev().find('.price-asction-end').text(value - 1);\n                        } else {\n                            var origin = parseInt($tr.prev().find('.price-asction-end').text());\n                            $(this).val(origin + 1);\n                            layer.tips('修改值需大于' + min + (max ? ',并且小于' + max : ''), '.end-tips-mark');\n                        }\n                    });\n                    //添加确定按钮\n                    $list.on('click', '.price-add-confirm', function () {\n                        var $tr = $(this).parents('.price-section-new');\n                        var target = $tr.prev().find('.price-section-start-input').val();\n                        var value = $tr.find('.price-add-input').val();\n                        var ratio = $tr.find('.price-ratio-input').val();\n                        value = parseInt(value);\n                        if (value > parseInt(target)) {\n                            isAdding = false;\n                            $tr.prev().find('.price-asction-end').text(value - 1);\n                            $tr.parent().append(buildSection({\n                                price_ratio: ratio,\n                                start: value,\n                                end: 0\n                            }));\n                            $tr.remove();\n                        } else {\n                            layer.tips('新区间开始数量需大于' + target, '.price-add-confirm');\n                        }\n                    });\n                    //添加取消按钮\n                    $list.on('click', '.price-add-cancel', function () {\n                        isAdding = false;\n                        $(this).parents('.price-section-new').remove();\n                    });\n                },\n                yes: function yes(index) {\n                    var res = [];\n                    var isPass = true;\n                    $('.price-section-list').children('tr').each(function () {\n                        var $tr = $(this);\n                        if (!$tr.hasClass('price-section-new')) {\n                            var start = parseInt($tr.find('.price-section-start-input').val());\n                            var end = parseInt($tr.find('.price-asction-end').text());\n                            var ratio = $tr.find('.price-asction-ratio').val();\n                            if (!ratio.trim()) {\n                                isPass = false;\n                                return false;\n                            }\n                            res.push({\n                                start: start ? start : 0,\n                                end: end ? end + 1 : 0,\n                                price_ratio: ratio\n                            });\n                        }\n                    });\n                    if (isPass) {\n                        $this.siblings().text(JSON.stringify(res));\n                        layer.close(index);\n                    } else {\n                        layer.tips('请填写完整区间比例', '.ratio-tips-mark');\n                    }\n                }\n            });\n        });\n        //初始化选择pm\n        selectPm.initInput();\n    };\n\n    exports(\"actionTable\", {\n        init: function init(products) {\n            productList = products.productList ? handleData(products.productList.list) : [];\n            request = products.request;\n            categoryTree = products.categoryTree;\n            brandList = products.brandList;\n            attributeList = products.attributeList;\n            // console.log(brandList);\n            // adminFront=products.adminFront;\n            demo['person_liable'] = products.adminFront.uid;\n            initTable();\n        },\n        addRow: addRow,\n        getData: getData,\n        handleData: handleData\n    });\n});"]}