{"version":3,"sources":["Common/module/translate/tjsBrowser.js"],"names":["tjs","exports","bluemd5","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","this","n","v","op","TypeError","call","pop","length","push","invert","obj","key","hasOwnProperty","root","standard2custom","en","th","ru","pt","el","nl","pl","bg","et","da","fi","cs","ro","sl","sv","hu","de","it","zh-CN","zh-TW","ja","ko","es","fr","ar","custom2standard","getValue","pathArray","defaultValue","i","getError","code","msg","Error","qs","r","_loop_1","concat","map","valStr","encodeURIComponent","join","request","options","xhr","XMLHttpRequest","urlObj","URL","url","search","query","_a","method","open","toString","type","setRequestHeader","JSON","stringify","headers","header","responseType","onload","status","response","onerror","message","send","C","a","o","charAt","charCodeAt","Number","seedReg","tokenReg","undefined","sign$1","text","seed","_b","html","token","match","getSeed","sign","substr","Math","floor","split","h","d","m","S","s","detect","iso689lang","slice","error","lan","getAudioURI","lang","headers$1","X-Requested-With","transformRaw","transResult","trans_result","customFrom","customTo","raw","link","from","to","symbols","phonetic","ph_am","ph_en","name","ttsURI","dict","parts","part","means","data","dst","index","Object","freeze","translate","_c","customFromLang","customToLang","_d","_e","_f","_g","_h","_j","_k","_l","startsWith","assign","transtype","simple_means_flag","audio","getRoot","com","detect$1","src","client","dj","ie","oe","q","transformRaw$1","rawRes","queryObj","realFrom","pos","terms","sentences","trans","trim","index$1","Accept-Language","tl","dt","sk","standard2custom$1","custom2standard$1","translateAPI","headers$2","webAPI","transformRaw$2","smartresult","doctype","version","keyfrom","action","typoResult","salt","Date","now","parseInt","String","random","errorCode","smartResult","entries","filter","translateResult","tgt","detect$2","standard2custom$2","index$2","voiceLang","baidu","google","youdao","md5"],"mappings":"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","file":"../../../../../temporaryJs/Common/module/translate/tjsBrowser.js","sourcesContent":["var tjs = (function (exports,bluemd5) {\r\n    'use strict';\r\n\r\n    bluemd5 = bluemd5 && bluemd5.hasOwnProperty('default') ? bluemd5['default'] : bluemd5;\r\n\r\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n\r\n    function __awaiter(thisArg, _arguments, P, generator) {\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    }\r\n\r\n    function __generator(thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [0, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    }\r\n\r\n    /** 反转对象 */\r\n    function invert (obj) {\r\n        var result = {};\r\n        for (var key in obj) {\r\n            if (obj.hasOwnProperty(key)) {\r\n                result[obj[key]] = key;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    var root = 'https://fanyi.baidu.com';\r\n    /**\r\n     * 百度支持的语种到百度自定义的语种名的映射，去掉了文言文。\r\n     * @see http://api.fanyi.baidu.com/api/trans/product/apidoc#languageList\r\n     */\r\n    var standard2custom = {\r\n        en: 'en',\r\n        th: 'th',\r\n        ru: 'ru',\r\n        pt: 'pt',\r\n        el: 'el',\r\n        nl: 'nl',\r\n        pl: 'pl',\r\n        bg: 'bul',\r\n        et: 'est',\r\n        da: 'dan',\r\n        fi: 'fin',\r\n        cs: 'cs',\r\n        ro: 'rom',\r\n        sl: 'slo',\r\n        sv: 'swe',\r\n        hu: 'hu',\r\n        de: 'de',\r\n        it: 'it',\r\n        'zh-CN': 'zh',\r\n        'zh-TW': 'cht',\r\n        // 'zh-HK': 'yue',\r\n        ja: 'jp',\r\n        ko: 'kor',\r\n        es: 'spa',\r\n        fr: 'fra',\r\n        ar: 'ara'\r\n    };\r\n    /** 百度自定义的语种名到标准语种名的映射 */\r\n    var custom2standard = invert(standard2custom);\r\n\r\n    /**\r\n     * 安全的获取一个变量上指定路径的值。\r\n     * TODO: 使用 noshjs 代替\r\n     */\r\n    function getValue (obj, pathArray, defaultValue) {\r\n        if (obj == null)\r\n            return defaultValue;\r\n        if (typeof pathArray === 'string') {\r\n            pathArray = [pathArray];\r\n        }\r\n        var value = obj;\r\n        for (var i = 0; i < pathArray.length; i += 1) {\r\n            var key = pathArray[i];\r\n            value = value[key];\r\n            if (value == null) {\r\n                return defaultValue;\r\n            }\r\n        }\r\n        return value;\r\n    }\r\n\r\n    function getError (code, msg) {\r\n        var e = new Error(msg);\r\n        e.code = code;\r\n        return e;\r\n    }\r\n\r\n    /**\r\n     * 将对象转换成查询字符串\r\n     * TODO: 使用 noshjs 中的方法\r\n     */\r\n    function qs(obj) {\r\n        if (!obj)\r\n            return '';\r\n        var r = [];\r\n        var _loop_1 = function (key) {\r\n            var v = [].concat(obj[key]);\r\n            r.push.apply(r, v.map(function (valStr) { return key + \"=\" + encodeURIComponent(valStr); }));\r\n        };\r\n        for (var key in obj) {\r\n            _loop_1(key);\r\n        }\r\n        return r.join('&');\r\n    }\r\n    function request (options) {\r\n        var xhr = new XMLHttpRequest();\r\n        var urlObj = new URL(options.url);\r\n        urlObj.search += (urlObj.search ? '&' : '?') + qs(options.query);\r\n        var _a = options.method, method = _a === void 0 ? 'get' : _a;\r\n        xhr.open(method, urlObj.toString());\r\n        var body;\r\n        if (method === 'post') {\r\n            switch (options.type) {\r\n                case 'form':\r\n                    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\r\n                    body = qs(options.body);\r\n                    break;\r\n                case 'json':\r\n                default:\r\n                    xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');\r\n                    body = JSON.stringify(options.body);\r\n                    break;\r\n            }\r\n        }\r\n        var headers = options.headers;\r\n        if (headers) {\r\n            for (var header in headers) {\r\n                xhr.setRequestHeader(header, headers[header]);\r\n            }\r\n        }\r\n        xhr.responseType = options.responseType || 'json';\r\n        return new Promise(function (resolve, reject) {\r\n            xhr.onload = function () {\r\n                // 如果 responseType 设为 json 但服务器返回的数据无法解析成 json，\r\n                // 则 response 是 null，其他无法解析的情况也是同理。\r\n                // 另外，responseText 只能在 responseType 是 '' 或 'text' 访问。\r\n                if (xhr.status !== 200 || xhr.response === null) {\r\n                    reject(getError(\"API_SERVER_ERROR\" /* API_SERVER_ERROR */));\r\n                    return;\r\n                }\r\n                resolve(xhr.response);\r\n            };\r\n            xhr.onerror = function (e) {\r\n                reject(getError(\"NETWORK_ERROR\" /* NETWORK_ERROR */, e.message));\r\n            };\r\n            xhr.send(body);\r\n        });\r\n    }\r\n\r\n    // tslint:disable\r\n    var C = null;\r\n    /**\r\n     * 从百度网页翻译中复制过来的计算签名的代码\r\n     * @param text 要查询的文本\r\n     * @param seed 从 ./seed.ts 获取到的 seed\r\n     */\r\n    function sign (text, seed) {\r\n        var o = text.length;\r\n        o > 30 &&\r\n        (text =\r\n            '' +\r\n            text.substr(0, 10) +\r\n            text.substr(Math.floor(o / 2) - 5, 10) +\r\n            text.substr(-10, 10));\r\n        var t = null !== C ? C : (C = seed || '') || '';\r\n        for (var e = t.split('.'), h = Number(e[0]) || 0, i = Number(e[1]) || 0, d = [], f = 0, g = 0; g < text.length; g++) {\r\n            var m = text.charCodeAt(g);\r\n            128 > m\r\n                ? (d[f++] = m)\r\n                : (2048 > m\r\n                ? (d[f++] = (m >> 6) | 192)\r\n                : (55296 === (64512 & m) &&\r\n                g + 1 < text.length &&\r\n                56320 === (64512 & text.charCodeAt(g + 1))\r\n                    ? (m =\r\n                        65536 + ((1023 & m) << 10) + (1023 & text.charCodeAt(++g)), d[f++] = (m >> 18) | 240, d[f++] = ((m >> 12) & 63) | 128)\r\n                    : (d[f++] = (m >> 12) | 224), d[f++] = ((m >> 6) & 63) | 128), d[f++] = (63 & m) | 128);\r\n        }\r\n        for (var S = h, u = '+-a^+6', l = '+-3^+b+-f', s = 0; s < d.length; s++)\r\n            S += d[s], S = a(S, u);\r\n        return (S = a(S, l), S ^= i, 0 > S && (S = (2147483647 & S) + 2147483648), S %= 1e6, S.toString() + '.' + (S ^ h));\r\n    }\r\n    function a(r, o) {\r\n        for (var t = 0; t < o.length - 2; t += 3) {\r\n            var a = o.charAt(t + 2);\r\n            a = a >= 'a' ? a.charCodeAt(0) - 87 : Number(a), a = '+' === o.charAt(t + 1) ? r >>> a : r << a, r = '+' === o.charAt(t) ? (r + a) & 4294967295 : r ^ a;\r\n        }\r\n        return r;\r\n    }\r\n\r\n    var seedReg = /window\\.gtk\\s=\\s'([^']+)';/;\r\n    var tokenReg = /token:\\s'([^']+)'/;\r\n    var headers = undefined;\r\n    function getSeed () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var html, seed, token;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, request({\r\n                        url: 'https://fanyi.baidu.com',\r\n                        headers: headers,\r\n                        responseType: 'text'\r\n                    })];\r\n                    case 1:\r\n                        html = _a.sent();\r\n                        seed = html.match(seedReg);\r\n                        if (seed) {\r\n                            token = html.match(tokenReg);\r\n                            if (token) {\r\n                                return [2 /*return*/, {\r\n                                    seed: seed[1],\r\n                                    token: token[1]\r\n                                }];\r\n                            }\r\n                        }\r\n                        // 如果不能正确解析出 seed 和 token，则视为服务器错误\r\n                        throw getError(\"API_SERVER_ERROR\" /* API_SERVER_ERROR */);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取查询百度网页翻译接口所需的 token 和 sign\r\n     * @param text 要查询的文本\r\n     */\r\n    function sign$1 (text) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, seed, token;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, getSeed()];\r\n                    case 1:\r\n                        _a = _b.sent(), seed = _a.seed, token = _a.token;\r\n                        return [2 /*return*/, {\r\n                            token: token,\r\n                            sign: sign(text, seed)\r\n                        }];\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    function detect (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var query, body, iso689lang;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        query = (typeof options === 'string' ? options : options.text).slice(0, 73);\r\n                        return [4 /*yield*/, request({\r\n                            method: 'post',\r\n                            url: root + '/langdetect',\r\n                            body: {\r\n                                query: query\r\n                            },\r\n                            type: 'form'\r\n                        })];\r\n                    case 1:\r\n                        body = _a.sent();\r\n                        if (body.error === 0) {\r\n                            iso689lang = custom2standard[body.lan];\r\n                            if (iso689lang)\r\n                                return [2 /*return*/, iso689lang];\r\n                        }\r\n                        throw getError(\"UNSUPPORTED_LANG\" /* UNSUPPORTED_LANG */);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 生成百度语音地址\r\n     * @param text 要朗读的文本\r\n     * @param lang 文本的语种，使用百度自定义的语种名称\r\n     */\r\n    function getAudioURI(text, lang) {\r\n        return (root +\r\n            (\"/gettts?lan=\" + lang + \"&text=\" + encodeURIComponent(text) + \"&spd=3&source=web\"));\r\n    }\r\n    /**\r\n     * 获取指定文本的网络语音地址\r\n     */\r\n    function audio (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, text, _b, from, lang;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _a = typeof options === 'string' ? { text: options } : options, text = _a.text, _b = _a.from, from = _b === void 0 ? undefined : _b;\r\n                        if (!!from) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, detect(text)];\r\n                    case 1:\r\n                        from = _c.sent();\r\n                        _c.label = 2;\r\n                    case 2:\r\n                        if (from === 'en-GB') {\r\n                            lang = 'uk';\r\n                        }\r\n                        else {\r\n                            lang = standard2custom[from];\r\n                            if (!lang)\r\n                                throw getError(\"UNSUPPORTED_LANG\" /* UNSUPPORTED_LANG */);\r\n                        }\r\n                        return [2 /*return*/, getAudioURI(text, lang)];\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    var headers$1 = {\r\n        'X-Requested-With': 'XMLHttpRequest'\r\n    };\r\n    function translate (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, _b, from, _c, to, text, customFromLang, customToLang, _d, _e, _f, _g, _h, _j, _k;\r\n            return __generator(this, function (_l) {\r\n                switch (_l.label) {\r\n                    case 0:\r\n                        _a = typeof options === 'string' ? { text: options } : options, _b = _a.from, from = _b === void 0 ? undefined : _b, _c = _a.to, to = _c === void 0 ? undefined : _c, text = _a.text;\r\n                        if (!!from) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, detect(text)];\r\n                    case 1:\r\n                        from = _l.sent();\r\n                        _l.label = 2;\r\n                    case 2:\r\n                        if (!to) {\r\n                            to = from.startsWith('zh') ? 'en' : 'zh-CN';\r\n                        }\r\n                        customFromLang = standard2custom[from];\r\n                        customToLang = standard2custom[to];\r\n                        if (!customFromLang || !customToLang) {\r\n                            throw getError(\"UNSUPPORTED_LANG\" /* UNSUPPORTED_LANG */);\r\n                        }\r\n                        _d = transformRaw;\r\n                        _e = [text];\r\n                        _f = request;\r\n                        _g = {\r\n                            url: root + '/v2transapi',\r\n                            type: 'form',\r\n                            method: 'post'\r\n                        };\r\n                        _j = (_h = Object).assign;\r\n                        _k = [{\r\n                            from: customFromLang,\r\n                            to: customToLang,\r\n                            query: text,\r\n                            transtype: 'translang',\r\n                            simple_means_flag: 3\r\n                        }];\r\n                        return [4 /*yield*/, sign$1(text)];\r\n                    case 3: return [4 /*yield*/, _f.apply(void 0, [(_g.body = _j.apply(_h, _k.concat([_l.sent()])), _g.headers = headers$1, _g)])];\r\n                    case 4: return [2 /*return*/, _d.apply(void 0, _e.concat([_l.sent()]))];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function transformRaw(text, body) {\r\n        var transResult = body.trans_result;\r\n        var customFrom = getValue(transResult, 'from');\r\n        var customTo = getValue(transResult, 'to');\r\n        var result = {\r\n            text: text,\r\n            raw: body,\r\n            link: root + (\"/#\" + customFrom + \"/\" + customTo + \"/\" + encodeURIComponent(text)),\r\n            from: custom2standard[customFrom],\r\n            to: custom2standard[customTo]\r\n        };\r\n        var symbols = getValue(body, [\r\n            'dict_result',\r\n            'simple_means',\r\n            'symbols',\r\n            '0'\r\n        ]);\r\n        if (symbols) {\r\n            // 解析音标\r\n            var phonetic = [];\r\n            var ph_am = symbols.ph_am, ph_en = symbols.ph_en;\r\n            if (ph_am) {\r\n                phonetic.push({\r\n                    name: '美',\r\n                    ttsURI: getAudioURI(text, 'en'),\r\n                    value: ph_am\r\n                });\r\n            }\r\n            if (ph_en) {\r\n                phonetic.push({\r\n                    name: '英',\r\n                    ttsURI: getAudioURI(text, 'en-GB'),\r\n                    value: ph_en\r\n                });\r\n            }\r\n            if (phonetic.length) {\r\n                result.phonetic = phonetic;\r\n            }\r\n            // 解析词典数据\r\n            try {\r\n                result.dict = symbols.parts.map(function (part) {\r\n                    return part.part + ' ' + part.means.join('；');\r\n                });\r\n            }\r\n            catch (e) { }\r\n        }\r\n        // 解析普通的翻译结果\r\n        try {\r\n            result.result = transResult.data.map(function (d) { return d.dst; });\r\n        }\r\n        catch (e) { }\r\n        if (!result.dict && !result.result) {\r\n            throw getError(\"API_SERVER_ERROR\" /* API_SERVER_ERROR */);\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\n\r\n    var index = /*#__PURE__*/Object.freeze({\r\n        translate: translate,\r\n        detect: detect,\r\n        audio: audio\r\n    });\r\n\r\n    // 谷歌翻译支持 104 中语言，有一部分不是 IOS-639-1 标准。\r\n    function getRoot(com) {\r\n        return 'https://translate.google.c' + (com ? 'om' : 'n');\r\n    }\r\n\r\n    function detect$1 (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, text, _b, com, src;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _a = typeof options === 'string' ? { text: options } : options, text = _a.text, _b = _a.com, com = _b === void 0 ? false : _b;\r\n                        return [4 /*yield*/, request({\r\n                            url: getRoot(com) + '/translate_a/single',\r\n                            query: {\r\n                                client: 'gtx',\r\n                                sl: 'auto',\r\n                                dj: '1',\r\n                                ie: 'UTF-8',\r\n                                oe: 'UTF-8',\r\n                                q: text\r\n                            }\r\n                        })];\r\n                    case 1:\r\n                        src = (_c.sent()).src;\r\n                        if (src)\r\n                            return [2 /*return*/, src];\r\n                        throw getError(\"UNSUPPORTED_LANG\" /* UNSUPPORTED_LANG */);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    function audio$1 (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, text, _b, from, _c, com;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        _a = typeof options === 'string' ? { text: options } : options, text = _a.text, _b = _a.from, from = _b === void 0 ? '' : _b, _c = _a.com, com = _c === void 0 ? false : _c;\r\n                        if (!!from) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, detect$1(text)];\r\n                    case 1:\r\n                        from = _d.sent();\r\n                        _d.label = 2;\r\n                    case 2: return [2 /*return*/, getRoot(com) + \"/translate_tts?ie=UTF-8&client=gtx&tl=\" + from + \"&q=\" + encodeURIComponent(text)];\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    function translate$1 (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, text, _b, com, _c, from, _d, to, _e;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        _a = typeof options === 'string' ? { text: options } : options, text = _a.text, _b = _a.com, com = _b === void 0 ? false : _b, _c = _a.from, from = _c === void 0 ? '' : _c, _d = _a.to, to = _d === void 0 ? '' : _d;\r\n                        if (!!from) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, detect$1(options)];\r\n                    case 1:\r\n                        from = _f.sent();\r\n                        _f.label = 2;\r\n                    case 2:\r\n                        if (!to) {\r\n                            to = from.startsWith('zh') ? 'en' : 'zh-CN';\r\n                        }\r\n                        _e = transformRaw$1;\r\n                        return [4 /*yield*/, request({\r\n                            url: getRoot(com) + '/translate_a/single',\r\n                            headers: {\r\n                                // TODO: 保证目标语种不受操作系统或浏览器的设置影响，直接设置成 zh-CN 仍然有问题，需要看一下 0.6.x 的代码\r\n                                'Accept-Language': 'zh-CN,zh;q=0.9,en-GB;q=0.8,en;q=0.7'\r\n                            },\r\n                            query: {\r\n                                client: 'gtx',\r\n                                sl: from,\r\n                                tl: to,\r\n                                dj: '1',\r\n                                ie: 'UTF-8',\r\n                                oe: 'UTF-8',\r\n                                /*\r\n                                 t: sentences\r\n                                 rm: sentences[1]\r\n                                 bd: dict\r\n                                 at: alternative_translations\r\n                                 ss: synsets\r\n                                 rw: related_words\r\n                                 ex: examples\r\n                                 ld: ld_result\r\n                                */\r\n                                dt: ['at', 'bd', 'ex', 'md', 'qca', 'rw', 'rm', 'ss', 't'],\r\n                                q: text\r\n                            }\r\n                        })];\r\n                    case 3: return [2 /*return*/, _e.apply(void 0, [_f.sent(),\r\n                        {\r\n                            from: from,\r\n                            to: to,\r\n                            com: com,\r\n                            text: text\r\n                        }])];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function transformRaw$1(rawRes, queryObj) {\r\n        var text = queryObj.text, to = queryObj.to;\r\n        var realFrom = rawRes.src || queryObj.from;\r\n        var obj = {\r\n            text: text,\r\n            from: realFrom,\r\n            to: to,\r\n            raw: rawRes,\r\n            link: getRoot(queryObj.com) + \"/#\" + realFrom + \"/\" + to + \"/\" + encodeURIComponent(text)\r\n        };\r\n        try {\r\n            // 尝试获取详细释义\r\n            obj.dict = rawRes.dict.map(function (v) {\r\n                return v.pos + '：' + (v.terms.slice(0, 3) || []).join(',');\r\n            });\r\n        }\r\n        catch (e) { }\r\n        try {\r\n            // 尝试取得翻译结果\r\n            var sentences = rawRes.sentences;\r\n            // 去掉最后一项\r\n            sentences.pop();\r\n            obj.result = sentences.map(function (_a) {\r\n                var trans = _a.trans;\r\n                return trans.trim();\r\n            });\r\n        }\r\n        catch (e) { }\r\n        if (!obj.dict && !obj.result) {\r\n            throw getError(\"API_SERVER_ERROR\" /* API_SERVER_ERROR */);\r\n        }\r\n        return obj;\r\n    }\r\n\r\n\r\n\r\n    var index$1 = /*#__PURE__*/Object.freeze({\r\n        detect: detect$1,\r\n        audio: audio$1,\r\n        translate: translate$1\r\n    });\r\n\r\n    // blueimp-md5 是一个 CommonJS 模块，为了跟 ./node.ts 保持一致，这里将它转换为 ES6 模块\r\n\r\n    var client = 'fanyideskweb';\r\n    var sk = \"rY0D^0'nM0}g5Mm1z%1G4\";\r\n    /**\r\n     * 有道翻译接口的签名算法\r\n     * @param {string} text\r\n     * @return {{client: string, salt: number, sign: string}}\r\n     */\r\n    function sign$2 (text) {\r\n        var salt = Date.now() + parseInt(String(10 * Math.random()), 10);\r\n        return {\r\n            client: client,\r\n            salt: salt,\r\n            sign: bluemd5(client + text + salt + sk)\r\n        };\r\n    }\r\n\r\n    var standard2custom$1 = {\r\n        en: 'en',\r\n        ru: 'ru',\r\n        pt: 'pt',\r\n        es: 'es',\r\n        'zh-CN': 'zh-CHS',\r\n        ja: 'ja',\r\n        ko: 'ko',\r\n        fr: 'fr'\r\n    };\r\n    var custom2standard$1 = invert(standard2custom$1);\r\n    var link = 'http://fanyi.youdao.com';\r\n    var translateAPI = link + '/translate_o?smartresult=dict&smartresult=rule';\r\n    // 有道跟百度一样，通过添加一个 Cookie 鉴别请求是否来自网页\r\n    var headers$2 = undefined;\r\n    function webAPI (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, text, _b, from, _c, to, _d;\r\n            return __generator(this, function (_e) {\r\n                switch (_e.label) {\r\n                    case 0:\r\n                        _a = typeof options === 'string' ? { text: options } : options, text = _a.text, _b = _a.from, from = _b === void 0 ? '' : _b, _c = _a.to, to = _c === void 0 ? '' : _c;\r\n                        text = text.slice(0, 5000);\r\n                        if (from) {\r\n                            from = standard2custom$1[from];\r\n                        }\r\n                        else {\r\n                            from = 'AUTO';\r\n                        }\r\n                        if (to) {\r\n                            to = standard2custom$1[to];\r\n                        }\r\n                        else {\r\n                            to = 'AUTO';\r\n                        }\r\n                        // 有道网页翻译的接口的语种与目标语种中必须有一个是中文，或者两个都是 AUTO\r\n                        if (!((from === 'AUTO' && to === 'AUTO') ||\r\n                            (from === 'zh-CHS' || to === 'zh-CHS'))) {\r\n                            throw getError(\"UNSUPPORTED_LANG\" /* UNSUPPORTED_LANG */);\r\n                        }\r\n                        _d = transformRaw$2;\r\n                        return [4 /*yield*/, request({\r\n                            method: 'post',\r\n                            url: translateAPI,\r\n                            type: 'form',\r\n                            body: Object.assign({\r\n                                i: text,\r\n                                from: from,\r\n                                to: to,\r\n                                smartresult: 'dict',\r\n                                doctype: 'json',\r\n                                version: '2.1',\r\n                                keyfrom: 'fanyi.web',\r\n                                action: 'FY_BY_REALTIME',\r\n                                typoResult: 'false'\r\n                            }, sign$2(text)),\r\n                            headers: headers$2\r\n                        })];\r\n                    case 1: return [2 /*return*/, _d.apply(void 0, [_e.sent(),\r\n                        text])];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function transformRaw$2(body, text) {\r\n        if (body.errorCode !== 0) {\r\n            throw getError(\"API_SERVER_ERROR\" /* API_SERVER_ERROR */);\r\n        }\r\n        var _a = body.type.split('2'), from = _a[0], to = _a[1];\r\n        from = custom2standard$1[from];\r\n        to = custom2standard$1[to];\r\n        var smartResult = body.smartResult;\r\n        var result = {\r\n            raw: body,\r\n            text: text,\r\n            from: from,\r\n            to: to,\r\n            link: smartResult\r\n                ? \"https://dict.youdao.com/search?q=\" + encodeURIComponent(text) + \"&keyfrom=fanyi.smartResult\"\r\n                : \"http://fanyi.youdao.com/translate?i=\" + encodeURIComponent(text)\r\n        };\r\n        if (smartResult) {\r\n            try {\r\n                result.dict = smartResult.entries.filter(function (s) { return s; }).map(function (s) { return s.trim(); });\r\n            }\r\n            catch (e) { }\r\n        }\r\n        try {\r\n            result.result = body.translateResult[0].map(function (o) { return o.tgt.trim(); });\r\n        }\r\n        catch (e) { }\r\n        return result;\r\n    }\r\n\r\n    function detect$2 (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, webAPI(typeof options === 'string' ? options : options.text)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, result.from];\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    var standard2custom$2 = {\r\n        en: 'eng',\r\n        ja: 'jap',\r\n        ko: 'ko',\r\n        fr: 'fr'\r\n    };\r\n    function audio$2 (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, text, _b, from, voiceLang;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _a = typeof options === 'string' ? { text: options } : options, text = _a.text, _b = _a.from, from = _b === void 0 ? '' : _b;\r\n                        if (!!from) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, detect$2(text)];\r\n                    case 1:\r\n                        from = _c.sent();\r\n                        _c.label = 2;\r\n                    case 2:\r\n                        voiceLang = standard2custom$2[from];\r\n                        if (!voiceLang)\r\n                            throw getError(\"UNSUPPORTED_LANG\" /* UNSUPPORTED_LANG */);\r\n                        return [2 /*return*/, \"http://tts.youdao.com/fanyivoice?word=\" + encodeURIComponent(text) + \"&le=\" + voiceLang + \"&keyfrom=speaker-target\"];\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n\r\n\r\n    var index$2 = /*#__PURE__*/Object.freeze({\r\n        detect: detect$2,\r\n        audio: audio$2,\r\n        translate: webAPI\r\n    });\r\n\r\n    exports.baidu = index;\r\n    exports.google = index$1;\r\n    exports.youdao = index$2;\r\n\r\n    return exports;\r\n\r\n}({},md5));"]}