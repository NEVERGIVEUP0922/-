{"version":3,"sources":["Common/Common/module/uploadify/upload.js"],"names":["SetImgContent","data","pic","obj","status","sLi","alert","message","SetUploadFile","url","$","each","l_i","this","attr","a_i","click","get","filename","prev","val","rel","remove","Close","window","parent","document","callback","callBack","fileurl_tmp","num","index","dom","value","push","eval","find","input","append"],"mappings":"AAGA,SAASA,cAAcC,EAAMC,GAC5B,IAAIC,EAAMF,EACV,GAAiB,GAAdE,EAAIC,OAAP,CACC,IAAIC,EAAM,GAMV,OALAA,GAAO,mBACPA,GAAO,aAAeF,EAAIF,KAAO,kDAAkDC,EAAI,OACvFG,GAAO,oDAAsDF,EAAIF,KAAO,KACxEI,GAAO,uCACPA,GAAO,QAIPC,MAAMH,EAAII,SAOZ,SAASC,cAAcC,GACtBC,EAAE,SAASC,KAAK,SAASC,GACxBF,EAAEG,MAAMC,KAAK,KAAM,MAAQF,KAE5BF,EAAE,WAAWC,KAAK,SAASI,GAC1BL,EAAEG,MAAMC,KAAK,MAAO,MAAQC,KAC1BC,MAAM,WACRN,EAAEO,IACDR,EAAI,CAACS,SAASR,EAAEG,MAAMM,OAAOC,OAAO,cAErCV,EAAE,IAAMG,KAAKQ,KAAKC,WAsCpB,SAASC,QACRb,EAAE,qBAAsBc,OAAOC,OAAOC,UAAUJ,SA5BjDZ,EAAE,YAAYM,MAAM,WACnB,IAAIW,SAAWC,SACXC,YAAc,GAClB,GAAe,aAAZF,UAAuC,IAAZA,SAU7B,OATS,EAANG,IACDpB,EAAE,8BAA8BC,KAAK,SAASoB,EAAMC,GACpDH,YAAYE,GAASC,EAAIC,QAG1BJ,YAAYK,KAAKxB,EAAE,8BAA8BU,OAElDe,KAAK,iBAAiBR,SAAS,sBAC/BjB,EAAEc,OAAOC,OAAOC,UAAUU,KAAK,sBAAsBd,SAGtD,GAAS,EAANQ,IAAQ,CACT,IAAID,YAAc,GAClBnB,EAAE,8BAA8BC,KAAK,WACpCkB,aAAe,YAAahB,KAAKoB,MAAO,gDAAgDI,MAAM,eAAgBxB,KAAKoB,MAAO,4DAA6DpB,KAAKoB,MAAO,wBAEpMvB,EAAEc,OAAOC,OAAOC,UAAUU,KAAK,IAAIC,OAAOC,OAAOT,kBAEjDnB,EAAEc,OAAOC,OAAOC,UAAUU,KAAK,IAAIC,OAAOjB,IAAIV,EAAE,8BAA8BU,OAEhFG,UAMDb,EAAE,cAAcM,MAAM,WACrBN,EAAE,qBAAsBc,OAAOC,OAAOC,UAAUJ","file":"../../../../../../temporaryJs/Common/Common/module/uploadify/upload.js","sourcesContent":["/**\r\n * \r\n */\r\nfunction SetImgContent(data, pic){\t\r\n\tvar obj = data;\r\n\tif(obj.status == 1){\r\n\t\tvar sLi = \"\";\r\n\t\tsLi += '<li class=\"img\">';\r\n\t\tsLi += '<img src=\"' + obj.data + '\" width=\"100\" height=\"100\" onerror=\"this.src=\\''+pic+'\\'\">';\r\n\t\tsLi += '<input type=\"hidden\" name=\"fileurl_tmp[]\" value=\"' + obj.data + '\">';\r\n\t\tsLi += '<a href=\"javascript:void(0);\">删除</a>';\r\n\t\tsLi += '</li>';\r\n\t\treturn sLi;\r\n\t}else{\r\n\t\t//window.parent.message(obj.text,8,2);\r\n\t\talert(obj.message);\r\n\t\treturn;\r\n\t}\r\n}\r\n\r\n\r\n\r\nfunction SetUploadFile(url){\r\n\t$(\"ul li\").each(function(l_i){\r\n\t\t$(this).attr(\"id\", \"li_\" + l_i);\r\n\t})\r\n\t$(\"ul li a\").each(function(a_i){\r\n\t\t$(this).attr(\"rel\", \"li_\" + a_i);\r\n\t}).click(function(){\r\n\t\t$.get(\r\n\t\t\turl,{filename:$(this).prev().val()},function(){}\r\n\t\t);\r\n\t\t$(\"#\" + this.rel).remove();\r\n\t})\r\n}\r\n\r\n/**\r\n * 点击保存按钮时\r\n * 判断允许上传数，检测是单一文件上传还是组文件上传\r\n * 如果是单一文件，上传结束后将地址存入$input元素\r\n * 如果是组文件上传，则创建input样式，添加到$input后面\r\n * 隐藏父框架，清空列队，移除已上传文件样式\r\n */\r\n$(\"#SaveBtn\").click(function(){\t\r\n\tvar callback = callBack;\r\n\tvar fileurl_tmp = [];\r\n\tif(callback != \"undefined\" && callback != ''){\t\r\n\t\tif(num > 1){\t\r\n\t\t\t $(\"input[name^='fileurl_tmp']\").each(function(index,dom){\r\n\t\t\t\tfileurl_tmp[index] = dom.value;\r\n\t\t\t });\t\r\n\t\t}else{\r\n\t\t\tfileurl_tmp.push($(\"input[name^='fileurl_tmp']\").val());\t\r\n\t\t}\r\n\t\teval('window.parent.'+callback+'(fileurl_tmp)');\r\n\t\t$(window.parent.document).find(\"iframe.uploadframe\").remove();\r\n\t\treturn;\r\n\t}\t\t\t\r\n\tif(num > 1){\r\n\t\t\tvar fileurl_tmp = \"\";\r\n\t\t\t$(\"input[name^='fileurl_tmp']\").each(function(){\r\n\t\t\t\tfileurl_tmp += '<li rel=\"'+ this.value +'\"><input class=\"input-text\" type=\"text\" name='+input+'\"[]\" value=\"'+ this.value +'\" /><a href=\"javascript:void(0);\" onclick=\"ClearPicArr(\\''+ this.value +'\\',\\'\\')\">删除</a></li>';\t\r\n\t\t\t});\t\t\t\r\n\t\t\t$(window.parent.document).find(\"#\"+input).append(fileurl_tmp);\r\n\t}else{\r\n\t\t\t$(window.parent.document).find(\"#\"+input).val($(\"input[name^='fileurl_tmp']\").val());\r\n\t}\r\n\tClose();\r\n});\r\n\r\nfunction Close(){\r\n\t$(\"iframe.uploadframe\", window.parent.document).remove();\r\n}\r\n$(\"#CancelBtn\").click(function(){\r\n\t$(\"iframe.uploadframe\", window.parent.document).remove();\r\n});"]}